webpackJsonp([99],{Bywz:function(e,t){},ziV7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("22Zk"),i=(n.a,{name:"whiteList",components:{InputArea:n.a},data:function(){return{currentPage:1,pagesize:10,total:0,dialogTitle:"",formLabelWidth:"120px",dialogFormVisible:!1,dialogVisible:!1,tableData:[],form:{versionUpd:{radio:"allVersion"},channelUpd:{radio:"allVersion"},forbidUpdVersion:{radio:"none"},forbidUpdChannel:{radio:"none"},isPublic:{radio:"none"},updStatus:{radio:"none"},checkList:["android","ios","windows"],updateTime:"",version:"",update_type:"",update_way:""},fileList:[],imageUrl:""}},methods:{resetForm:function(){this.form={channel_name:"",channel_id:"",belong_company:""}},getChannelList:function(){var e=this;this.$http.get("v1/backend/operation/channels",{params:{page:this.currentPage,limit:this.pageSize,company:"",channel_name:""}}).then(function(t){console.log(t),200===t.data.code&&(e.records=t.data.data,e.total=t.data.total)})},getCompanyList:function(){var e=this;this.$http.get("v1/backend/operation/channel/company").then(function(t){console.log(t),200===t.data.code&&(e.companyList=t.data.data)})},openAddDialog:function(){this.resetForm(),this.dialogTitle="添加渠道",this.dialogFormVisible=!0},addCompany:function(){var e=this,t={name:this.form1.company_name};this.$http.post("v1/backend/operation/channel/company",t).then(function(t){console.log(t),200===t.data.code&&(e.dialogVisible=!1,e.$message({type:"success",message:t.data.msg}))})},addChannel:function(){var e=this;if(this.form.id){console.log("wojinolei");var t={channel_name:this.form.channel_name,channel_num:this.form.channel_id,company:this.form.belong_company,channel_id:this.form.id};this.$http.put("v1/backend/operation/channels",t).then(function(t){console.log(t),200===t.data.code&&(e.dialogFormVisible=!1,e.getChannelList(),e.$message({type:"success",message:t.data.msg}))})}else{var a={channel_name:this.form.channel_name,channel_num:this.form.channel_id,company:this.form.belong_company};this.$http.post("v1/backend/operation/channels",a).then(function(t){console.log(t),200===t.data.code&&(e.dialogFormVisible=!1,e.getChannelList(),e.$message({type:"success",message:t.data.msg}))})}},search:function(){},handleEdit:function(e,t){console.log(e,t),this.dialogTitle="编辑渠道",this.dialogFormVisible=!0,this.form.id=t.id,this.form.channel_name=t.name,this.form.channel_id=t.code,this.form.belong_company=t.cname},handleDelete:function(e,t){var a=this;console.log(t),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.delete("v1/backend/operation/channels",{params:{channel_id:t.id}}).then(function(e){console.log(e),200===e.data.code&&(a.getChannelList(),a.$message({type:"success",message:e.data.msg}))})}).catch(function(){a.$message({type:"info",message:res.data.msg})})},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.getChannelList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.getChannelList()},handleAvatarSuccess:function(e,t){},handleChange:function(e,t,a){this.fileList[a]=t},beforeUpload:function(e){},uploadFile:function(){var e=this,t=new FormData;this.fileList.forEach(function(e){t.append("filename",e.raw),t.append("types",1)}),this.$http.post("v1/backend/upload",t).then(function(t){1===t.data.code&&(e.imageUrl=t.data.path)})}},mounted:function(){this.getChannelList(),this.getCompanyList()}}),o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"whiteList-main"}},[a("input-area",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"}},[e._v("添加ip白名单")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"}},[e._v("搜索")]),e._v(" "),a("div",[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)],1),e._v(" "),a("div",{staticClass:"bd"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"ip地址",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"备注",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"最后修改人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"操作时间",align:"center"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加ip白名单",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"ip地址","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addChannel}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,o,!1,function(e){a("Bywz")},"data-v-10bbfbe8",null);t.default=l.exports}});
//# sourceMappingURL=99.bfd52e96bc60ed30271d.js.map