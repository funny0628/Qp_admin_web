webpackJsonp([32],{"6JTF":function(t,e){},"9Fu8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("fZjL"),i=a.n(r),n=a("Xxa5"),l=a.n(n),o=a("exGp"),s=a.n(o),c=a("EuRQ"),u={data:function(){return{searchConfig:"",title:"新增",visible:!1,total:"",currentPage:1,limit:10,form:{lvl:"",min:"",max:"",rebate:""},rules:{lvl:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],min:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],max:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],rebate:[{required:!0,message:"必填项不可以为空",trigger:"blur"}]},tableData:[]}},created:function(){this.initdata({page:this.currentPage,limit:this.limit})},methods:{add:function(){this.editForm("新增",!0,{})},handleEdit:function(t){this.editForm("编辑",!0,Object(c.a)(t))},handleDelete:function(t,e){var a=this;this.$confirm("确认删除吗？","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(l.a.mark(function t(){var r,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$http.allAgency.DeleteAllAgency({id:e.id});case 2:r=t.sent,1===(i=r.data).code&&"ok"===i.msg&&a.initdata({page:a.currentPage,limit:a.limit}),a.$message({type:"success",message:"删除成功!"});case 6:case"end":return t.stop()}},t,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(t){this.limit=t,this.currentPage=1,this.initdata({page:this.currentPage,limit:this.limit})},handleCurrentChange:function(t){this.currentPage=t,this.initdata({page:this.currentPage,limit:this.limit})},onSubmit:function(t,e){var a,r=this;this.$refs[t].validate((a=s()(l.a.mark(function t(a){var n,o,s,c;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=19;break}if(i()(r.form).forEach(function(t){r.form[t]=parseInt(r.form[t])}),"新增"!==e){t.next=10;break}return t.next=5,r.$http.allAgency.PostAllAgency(r.form);case 5:n=t.sent,1===(o=n.data).code&&"ok"===o.msg&&r.initdata({page:r.currentPage,limit:r.limit}),t.next=16;break;case 10:if("编辑"!==e){t.next=16;break}return t.next=13,r.$http.allAgency.PutAllAgency(r.form);case 13:s=t.sent,1===(c=s.data).code&&"ok"===c.msg&&r.initdata({page:r.currentPage,limit:r.limit});case 16:r.editForm("新增",!1,{}),t.next=21;break;case 19:return console.log("error submit!!"),t.abrupt("return",!1);case 21:case"end":return t.stop()}},t,r)})),function(t){return a.apply(this,arguments)}))},editForm:function(t,e,a){this.title=t,this.visible=e,this.form=a},initdata:function(t){var e=this;return s()(l.a.mark(function a(){var r,i;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http.allAgency.GetAllAgency(t);case 2:r=a.sent,i=r.data,e.tableData=Object(c.a)(i.data),e.total=i.total;case 6:case"end":return a.stop()}},a,e)}))()}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"AgencyConfig"}},[t._m(0),t._v(" "),a("div",{staticClass:"search"},[a("h3",[t._v("统一配置")]),t._v(" "),a("p",[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("新增")])],1)]),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"","highlight-current-row":"",data:t.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"lvl",label:"代理级别",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"min",label:"流水区间下限",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"max",label:"流水区间上限",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"rebate",label:"每万返佣额度",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","show-overflow-tooltip":"",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.total>5?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),a("div",{staticClass:"dialog"},[a("el-dialog",{attrs:{title:t.title,visible:t.visible,"destroy-on-close":!0},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"代理级别：",prop:"lvl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"代理级别"},model:{value:t.form.lvl,callback:function(e){t.$set(t.form,"lvl",e)},expression:"form.lvl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"流水区间下限：",prop:"min"}},[a("p",[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"流水区间下限"},model:{value:t.form.min,callback:function(e){t.$set(t.form,"min",e)},expression:"form.min"}}),t._v("元\n          ")],1)]),t._v(" "),a("el-form-item",{attrs:{label:"流水区间上限：",prop:"max"}},[a("p",[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"流水区间上限"},model:{value:t.form.max,callback:function(e){t.$set(t.form,"max",e)},expression:"form.max"}}),t._v("元\n          ")],1)]),t._v(" "),a("el-form-item",{attrs:{label:"每万返佣额度：",prop:"rebate"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"每万返佣额度"},model:{value:t.form.rebate,callback:function(e){t.$set(t.form,"rebate",e)},expression:"form.rebate"}}),t._v(" "),a("p",[t._v("(元）注：每万返佣额度输入最大值不超过250。")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form",t.title)}}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("div",{staticClass:"Config"},[this._v("全民代理配置")])])}]};var f=a("VU/8")(u,m,!1,function(t){a("6JTF")},"data-v-79beb71a",null);e.default=f.exports}});
//# sourceMappingURL=32.c3425b2bcb6f668a3618.js.map