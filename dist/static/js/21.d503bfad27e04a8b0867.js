webpackJsonp([21],{PYSz:function(t,e){},zAmQ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n,o=i("a3Yh"),s=i.n(o),c=i("3cXf"),l=i.n(c),r=i("iVUn"),d=i("fftp"),f=i("zhQY"),h=i("Z/hU"),u=i("2u00"),_=(i("y35B"),i("22Zk")),p=i("06fe"),m=(h.a,p.a,_.a,r.a,d.a,u.a,a={resetForm:function(){this.form={id:null,checkList:[],active_1:"",active_2:"",active_3:"",active_4:"",active_5:"",active_6:""}},getFunSortList:function(){var t=this;this.$http.get("v1/backend/lobby/top",{params:{page:this.currentPage,limit:this.pagesize,type:2}}).then(function(e){console.log(e),1===e.data.code&&(t.records=e.data.data,t.total=e.data.total,t.func_list_index(),console.log(t.records))})},func_list_index:function(){this.records.map(function(t,e){JSON.parse(t.func_list).map(function(e,i){t["func_"+(i+1)]=e})})},search:function(){},openAddDialog:function(){this.dialogTitle="添加活动入口配置",this.dialogFormVisible=!0,this.resetForm(),this.getActiveOpts(),this.getChannelList()},addFunSortConf:function(){var t=this;if(this.form.id){var e=(this.form.active_1+","+this.form.active_2+","+this.form.active_3+","+this.form.active_4+","+this.form.active_5+","+this.form.active_6).split(","),i={name:this.form.checkList[0],code:this.form.checkList[0],list_id:l()(e),type:2,banner_id:this.form.id};this.$http.put("v1/backend/lobby/top",i).then(function(e){console.log(e),1===e.data.code&&(t.dialogFormVisible=!1,t.getFunSortList())})}else{var a=(this.form.active_1+","+this.form.active_2+","+this.form.active_3+","+this.form.active_4+","+this.form.active_5+","+this.form.active_6).split(","),n={name:this.form.checkList[0],code:this.form.checkList[0],list_id:l()(a),type:2};this.$http.post("v1/backend/lobby/top",n).then(function(e){console.log(e),1===e.data.code&&(t.dialogFormVisible=!1,t.getFunSortList())})}},handleEdit:function(t){console.log(t),this.dialogTitle="更新活动入口配置",this.dialogFormVisible=!0,this.getActiveOpts(),this.getChannelList(),this.form.id=t.id,this.form.checkList=[t.channel_name],this.form.active_1=JSON.parse(t.func_list)[0],this.form.active_2=JSON.parse(t.func_list)[1],this.form.active_3=JSON.parse(t.func_list)[2],this.form.active_4=JSON.parse(t.func_list)[3],this.form.active_5=JSON.parse(t.func_list)[4],this.form.active_6=JSON.parse(t.func_list)[5]},handleDelete:function(t){var e=this;console.log(t),this.$confirm("确认删除吗？","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete("v1/backend/lobby/top",{params:{id:t.id}}).then(function(t){console.log(t),1===t.data.code&&(e.getFunSortList(),e.$message({type:"success",message:t.data.msg}))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getChannelList:function(){var t=this;this.$http.post("v1/backend/no_channel",{type_id:1,add_id:1}).then(function(e){console.log(e),1===e.data.code&&(t.channelOpts=e.data.data)})}},s()(a,"getChannelList",function(){var t=this;this.$http.post("v1/backend/no_channel",{type_id:2,add_id:1}).then(function(e){console.log(e),1===e.data.code&&(t.channelOpts=e.data.data)})}),s()(a,"getActiveOpts",function(){var t=this;console.log("我调用了吗","getActiveOpts"),this.$http.get("v1/backend/lobby/name_type",{params:{type_id:3}}).then(function(e){console.log(e),1===e.data.code&&(t.funOpts=e.data.data,t.form.active_1=String(e.data.data[0].id),t.form.active_2=String(e.data.data[0].id),t.form.active_3=String(e.data.data[0].id),t.form.active_4=String(e.data.data[0].id),t.form.active_5=String(e.data.data[0].id),t.form.active_6=String(e.data.data[0].id))})}),s()(a,"handleSizeChange",function(t){this.pagesize=t,this.currentPage=1,this.getFunSortList()}),s()(a,"handleCurrentChange",function(t){this.currentPage=t,this.getFunSortList()}),{name:"function_sort_config",extends:h.a,components:{InfoTableItem:p.a,InputArea:_.a,SelectTime:r.a,InfoTable:d.a,PermissionButton:u.a},data:function(){return{pagesize:10,currentPage:1,total:0,dialogTitle:"",value:!0,labelPosition:"left",dialogFormVisible:!1,platforms:[{value:1,label:"平台1"},{value:2,label:"平台2"}],format:{platform:""},funOpts:[],channelOpts:[],tableStyle:[{label:"ID",prop:"id",width:""},{label:"渠道名称",prop:"channel_name",width:""},{label:"渠道KEY",prop:"channel_code",width:""},{label:"活动1",prop:"func_1",width:""},{label:"活动2",prop:"func_2",width:""},{label:"活动3",prop:"func_3",width:""},{label:"活动4",prop:"func_4",width:""},{label:"活动5",prop:"func_5",width:""},{label:"活动6",prop:"func_6",width:""},{label:"操作者",prop:"auth",width:""},{label:"创建时间",prop:"create_time",width:"160"},{label:"操作",prop:"action",width:"150"}],records:[],pageInfo:new f.a(0,[5,10,15],5),dialogAddVisible:!1,form:{checkList:[],active_1:"",active_2:"",active_3:"",active_4:"",active_5:"",active_6:""}}},methods:(n={resetForm:function(){this.form={id:null,checkList:[],active_1:"",active_2:"",active_3:"",active_4:"",active_5:"",active_6:""}},getFunSortList:function(){var t=this;this.$http.get("v1/backend/lobby/top",{params:{page:this.currentPage,limit:this.pagesize,type:2}}).then(function(e){console.log(e),1===e.data.code&&(t.records=e.data.data,t.total=e.data.total,t.func_list_index(),console.log(t.records))})},func_list_index:function(){this.records.map(function(t,e){JSON.parse(t.func_list).map(function(e,i){t["func_"+(i+1)]=e})})},search:function(){},openAddDialog:function(){this.dialogTitle="添加活动入口配置",this.dialogFormVisible=!0,this.resetForm(),this.getActiveOpts(),this.getChannelList()},addFunSortConf:function(){var t=this;if(this.form.id){var e=(this.form.active_1+","+this.form.active_2+","+this.form.active_3+","+this.form.active_4+","+this.form.active_5+","+this.form.active_6).split(","),i={name:this.form.checkList[0],code:this.form.checkList[0],list_id:l()(e),type:2,banner_id:this.form.id};this.$http.put("v1/backend/lobby/top",i).then(function(e){console.log(e),1===e.data.code&&(t.dialogFormVisible=!1,t.getFunSortList())})}else{var a=(this.form.active_1+","+this.form.active_2+","+this.form.active_3+","+this.form.active_4+","+this.form.active_5+","+this.form.active_6).split(","),n={name:this.form.checkList[0],code:this.form.checkList[0],list_id:l()(a),type:2};this.$http.post("v1/backend/lobby/top",n).then(function(e){console.log(e),1===e.data.code&&(t.dialogFormVisible=!1,t.getFunSortList())})}},handleEdit:function(t){console.log(t),this.dialogTitle="更新活动入口配置",this.dialogFormVisible=!0,this.getActiveOpts(),this.getChannelList(),this.form.id=t.id,this.form.checkList=[t.channel_name],this.form.active_1=JSON.parse(t.func_list)[0],this.form.active_2=JSON.parse(t.func_list)[1],this.form.active_3=JSON.parse(t.func_list)[2],this.form.active_4=JSON.parse(t.func_list)[3],this.form.active_5=JSON.parse(t.func_list)[4],this.form.active_6=JSON.parse(t.func_list)[5]},handleDelete:function(t){var e=this;console.log(t),this.$confirm("确认删除吗？","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete("v1/backend/lobby/top",{params:{id:t.id}}).then(function(t){console.log(t),1===t.data.code&&(e.getFunSortList(),e.$message({type:"success",message:t.data.msg}))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getChannelList:function(){var t=this;this.$http.post("v1/backend/no_channel",{type_id:1,add_id:1}).then(function(e){console.log(e),1===e.data.code&&(t.channelOpts=e.data.data)})}},s()(n,"getChannelList",function(){var t=this;this.$http.post("v1/backend/no_channel",{type_id:2,add_id:1}).then(function(e){console.log(e),1===e.data.code&&(t.channelOpts=e.data.data)})}),s()(n,"getActiveOpts",function(){var t=this;console.log("我调用了吗","getActiveOpts"),this.$http.get("v1/backend/lobby/name_type",{params:{type_id:3}}).then(function(e){console.log(e),1===e.data.code&&(t.funOpts=e.data.data,t.form.active_1=String(e.data.data[0].id),t.form.active_2=String(e.data.data[0].id),t.form.active_3=String(e.data.data[0].id),t.form.active_4=String(e.data.data[0].id),t.form.active_5=String(e.data.data[0].id),t.form.active_6=String(e.data.data[0].id))})}),s()(n,"handleSizeChange",function(t){this.pagesize=t,this.currentPage=1,this.getFunSortList()}),s()(n,"handleCurrentChange",function(t){this.currentPage=t,this.getFunSortList()}),n),mounted:function(){this.getFunSortList()}}),v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"FunSortConf-main"}},[i("input-area",[i("el-button",{directives:[{name:"has",rawName:"v-has",value:"add_function_sort_config",expression:"'add_function_sort_config'"}],attrs:{type:"primary"},on:{click:t.openAddDialog}},[t._v("添加")])],1),t._v(" "),i("div",{staticClass:"bd"},[i("info-table",{directives:[{name:"has",rawName:"v-has",value:"function_sort_config_list",expression:"'function_sort_config_list'"}],attrs:{search:t.search,"table-style":t.tableStyle,records:t.records,"page-info":t.pageInfo,"hide-page":!0}},[i("info-table-item",{attrs:{"table-style":t.tableStyle},scopedSlots:t._u([{key:"default",fn:function(e){return["action"===e.prop?[i("el-button",{directives:[{name:"has",rawName:"v-has",value:"modify_function_sort_config",expression:"'modify_function_sort_config'"}],attrs:{size:"mini",type:"primary"},on:{click:function(i){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{directives:[{name:"has",rawName:"v-has",value:"delete_function_sort_config",expression:"'delete_function_sort_config'"}],attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.row)}}},[t._v("删除")])]:t._e(),t._v(" "),["action","func_list"].indexOf(e.prop)<0?[t._v(t._s(e.row[e.prop]))]:t._e()]}}])})],1),t._v(" "),i("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("div",[i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.form,"label-position":"top"}},[i("el-form-item",{attrs:{label:"渠道(可多选)"}},[i("el-checkbox-group",{attrs:{max:1},model:{value:t.form.checkList,callback:function(e){t.$set(t.form,"checkList",e)},expression:"form.checkList"}},t._l(t.channelOpts,function(e,a){return i("el-checkbox",{key:a,attrs:{label:e.channel_code}},[t._v(t._s(e.channel_name))])}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"活动1"}},[i("el-row",{staticStyle:{width:"100%"},attrs:{gutter:20}},[i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("活动名称")]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.active_1,callback:function(e){t.$set(t.form,"active_1",e)},expression:"form.active_1"}},t._l(t.funOpts,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:String(t.id)}})}),1)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"活动2"}},[i("el-row",{staticStyle:{width:"100%"},attrs:{gutter:20}},[i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("活动名称")]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.active_2,callback:function(e){t.$set(t.form,"active_2",e)},expression:"form.active_2"}},t._l(t.funOpts,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:String(t.id)}})}),1)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"活动3"}},[i("el-row",{staticStyle:{width:"100%"},attrs:{gutter:20}},[i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("活动名称")]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.active_3,callback:function(e){t.$set(t.form,"active_3",e)},expression:"form.active_3"}},t._l(t.funOpts,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:String(t.id)}})}),1)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"活动4"}},[i("el-row",{staticStyle:{width:"100%"},attrs:{gutter:20}},[i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("活动名称")]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.active_4,callback:function(e){t.$set(t.form,"active_4",e)},expression:"form.active_4"}},t._l(t.funOpts,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:String(t.id)}})}),1)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"活动5"}},[i("el-row",{staticStyle:{width:"100%"},attrs:{gutter:20}},[i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("活动名称")]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.active_5,callback:function(e){t.$set(t.form,"active_5",e)},expression:"form.active_5"}},t._l(t.funOpts,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:String(t.id)}})}),1)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"活动6"}},[i("el-row",{staticStyle:{width:"100%"},attrs:{gutter:20}},[i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[t._v("活动名称")]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.active_6,callback:function(e){t.$set(t.form,"active_6",e)},expression:"form.active_6"}},t._l(t.funOpts,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:String(t.id)}})}),1)],1)],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.addFunSortConf}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var g=i("C7Lr")(m,v,!1,function(t){i("PYSz")},"data-v-95d27616",null);e.default=g.exports}});
//# sourceMappingURL=21.d503bfad27e04a8b0867.js.map