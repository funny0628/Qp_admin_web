webpackJsonp([33],{"H//3":function(e,t){},nj3G:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fftp"),i=a("zhQY"),s=(a("y35B"),a("22Zk")),o=a("06fe"),r=(o.a,s.a,n.a,{name:"online_users",inject:["reload"],components:{InfoTableItem:o.a,InputArea:s.a,InfoTable:n.a},data:function(){return{searchLoading:!1,currentPage:1,pagesize:10,total:0,tableStyle:[{label:"玩家id",prop:"uid",width:""},{label:"昵称",prop:"nickname",width:""},{label:"所在位置",prop:"table_type",width:""},{label:"携带金币额度",prop:"coins",width:""},{label:"渠道来源",prop:"channel",width:""},{label:"注册时间",prop:"created_time",width:""},{label:"注册ip",prop:"ip",width:""},{label:"最后登录ip",prop:"last_ip",width:""},{label:"机器码",prop:"device_id",width:""},{label:"操作",prop:"action",width:"150"}],format:{game_name:-1},allGameType:[],records:[],status:0,pageInfo:new i.a(0,[5,10,15],5)}},methods:{getOnlineUsersList:function(){var e=this;this.searchLoading=!0,this.$http.get("v1/backend/operation/online-users",{params:{page:this.currentPage,limit:this.pagesize,game_type:this.format.game_name}}).then(function(t){console.log(t),200==t.data.code&&(e.searchLoading=!1,e.records=t.data.data,e.total=t.data.total)})},getAllGameType:function(){var e=this;this.$http.get("v1/backend/operation/game-type").then(function(t){console.log(t),200===t.data.code&&(e.allGameType=t.data.data)})},searchData:function(){this.getOnlineUsersList()},handleOffline:function(e){var t=this;console.log(e),this.$confirm("确定踢该玩家下线吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={user_id:e.uid};t.$http.post("v1/backend/operation/online-users",a).then(function(e){console.log(e),200===e.data.code&&(t.getOnlineUsersList(),t.$message({type:"success",message:e.data.msg}))})}).catch(function(){t.$message({type:"info",message:"已取消"})})},handleSizeChange:function(e){this.pagesize=e,this.getOnlineUsersList()},handleCurrentChange:function(e){this.currentPage=e,this.getOnlineUsersList()}},mounted:function(){this.getOnlineUsersList(),this.getAllGameType()}}),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"OnlineUsers-main"}},[a("input-area",[a("el-select",{attrs:{size:"medium"},model:{value:e.format.game_name,callback:function(t){e.$set(e.format,"game_name",t)},expression:"format.game_name"}},[a("el-option",{attrs:{label:"所有",value:-1}}),e._v(" "),e._l(e.allGameType,function(e){return a("el-option",{key:e.game_id,attrs:{label:e.game_name,value:e.game_id}})})],2),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.searchLoading,expression:"searchLoading",modifiers:{fullscreen:!0}}],attrs:{"element-loading-text":"资源加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)",type:"primary",size:"medium"},on:{click:e.searchData}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"bd"},[a("info-table",{directives:[{name:"has",rawName:"v-has",value:"online_users_records",expression:"'online_users_records'"}],attrs:{"table-style":e.tableStyle,records:e.records,"page-info":e.pageInfo,hidePage:!0}},[a("info-table-item",{attrs:{"table-style":e.tableStyle},scopedSlots:e._u([{key:"default",fn:function(t){return["action"===t.prop?[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleOffline(t.row)}}},[e._v("下线")])]:e._e(),e._v(" "),["action"].indexOf(t.prop)<0?[e._v(e._s(t.row[t.prop]))]:e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(r,l,!1,function(e){a("H//3")},"data-v-7179b73a",null);t.default=c.exports}});