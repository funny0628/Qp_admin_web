webpackJsonp([65],{Fkd0:function(t,e){},QxSb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("ZLEe"),n=a.n(r),i=a("lC5x"),o=a.n(i),s=a("J0Oq"),l=a.n(s),c=a("Z/hU"),u=a("22Zk"),d=(c.a,u.a,{name:"bank_card",extends:c.a,components:{InputArea:u.a},data:function(){return{limit:10,currentPage:1,total:0,start:"",end:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},platforms:[{value:-1,label:"全部"},{value:0,label:"审核中"},{value:1,label:"已拒绝"},{value:3,label:"已完成"}],format:{user_id:"",order_status:""},titleData:[{label:"ID",prop:"id",width:""},{label:"订单号",prop:"order_id",width:""},{label:"用户id",prop:"uid",width:""},{label:"转账方式",prop:"way",width:""},{label:"姓名",prop:"bank_user_name",width:""},{label:"账号",prop:"bank_account",width:""},{label:"金额",prop:"money",width:""},{label:"赠送金额",prop:"give_money",width:""},{label:"状态",prop:"o_status",width:""},{label:"内部订单号",prop:"inner_order_id",width:""},{label:"备注",prop:"o_desc",width:""},{label:"操作者",prop:"op_name",width:""},{label:"操作时间",prop:"updated_at",width:"160"}],dialogAddVisible:!1,form:{checkList:["0902代理01","0902代理02"],function:"1",agent:100,nickname:"",password:"",money_password:"",phone:"",user_type:"1"},tableData:[],o_status:{0:"审核中",1:"已拒绝",3:"已完成"}}},created:function(){var t=this;return l()(o.a.mark(function e(){var a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=(new Date).getTime(),r=(new Date).getTime()-6048e5,t.start=r,t.end=a,t.initData({page:t.currentPage,limit:t.limit});case 5:case"end":return e.stop()}},e,t)}))()},methods:{search:function(){console.log(this.format.user_id,this.format.order_status,this.start,this.end),this.initData({page:this.currentPage,limit:this.limit,uid:+this.format.user_id||0,status:this.format.order_status||-1,start_time:Math.ceil(this.start/1e3)||0,end_time:Math.ceil(this.end/1e3)||0})},handleSizeChange:function(t){this.currentPage=1,this.limit=t,this.initData({page:this.currentPage,limit:this.limit})},handleCurrentChange:function(t){this.currentPage=t,this.initData({page:this.currentPage,limit:this.limit})},CheckOrder:function(t,e){var a=this;return l()(o.a.mark(function r(){var n,i;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(t,e.order_id),r.next=3,a.$http.allAgency.PostOrdercheck({order_id:e.order_id,action:t});case 3:n=r.sent,i=n.data,console.log(i),200===i.code&&a.initData();case 7:case"end":return r.stop()}},r,a)}))()},timestampToTime:function(t){var e=new Date(1e3*t);return e.getFullYear()+"-"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-")+(e.getDate()+" ")+(e.getHours()+":")+(e.getMinutes()+":")+e.getSeconds()},formatData:function(t){var e=this;return t.forEach(function(t){t.way=0===t.way?"银行卡":"支付宝",t.updated_at=e.timestampToTime(t.updated_at),n()(e.o_status).forEach(function(a){t.o_status===+a&&(t.o_status=e.o_status[a])})}),t},initData:function(t){var e=this;return l()(o.a.mark(function a(){var r,n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http.allAgency.GetBankOrder(t);case 2:r=a.sent,n=r.data,console.log(n),e.tableData=e.formatData(n.data),e.total=n.total;case 7:case"end":return a.stop()}},a,e)}))()}},mounted:function(){}}),p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"BankOrder-main"}},[a("div",{staticClass:"title"},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户id",size:"medium",clearable:""},model:{value:t.format.user_id,callback:function(e){t.$set(t.format,"user_id",e)},expression:"format.user_id"}}),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"medium"},model:{value:t.format.order_status,callback:function(e){t.$set(t.format,"order_status",e)},expression:"format.order_status"}},t._l(t.platforms,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd hh:mm:ss","value-format":"timestamp"},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}}),t._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd hh:mm:ss","value-format":"timestamp"},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":"","tooltip-effect":"dark",border:"","default-sort":{prop:"date",order:"descending"}}},[t._l(t.titleData,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,sortable:"ID"===t.label,align:"center","show-overflow-tooltip":""}})}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","show-overflow-tooltip":"",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return["审核中"===e.row.o_status?a("el-button",{directives:[{name:"has",rawName:"v-has",value:"modify_game_notice",expression:"'modify_game_notice'"}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.CheckOrder(1,e.row)}}},[t._v("通过并发货")]):t._e(),t._v(" "),"审核中"===e.row.o_status?a("el-button",{directives:[{name:"has",rawName:"v-has",value:"delete_game_notice",expression:"'delete_game_notice'"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.CheckOrder(2,e.row)}}},[t._v("拒绝")]):t._e()]}}])})],2),t._v(" "),t.total>5?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)])},staticRenderFns:[]};var m=a("C7Lr")(d,p,!1,function(t){a("Fkd0")},"data-v-402c3176",null);e.default=m.exports}});