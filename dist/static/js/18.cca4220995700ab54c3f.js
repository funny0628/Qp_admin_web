webpackJsonp([18],{"3iG9":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("iVUn"),i=a("fftp"),o=a("zhQY"),l=a("Z/hU"),n=a("2u00"),s=(a("y35B"),a("22Zk")),d=a("06fe"),c=(l.a,d.a,s.a,r.a,i.a,n.a,{name:"withdraw_records",extends:l.a,components:{InfoTableItem:d.a,InputArea:s.a,SelectTime:r.a,InfoTable:i.a,PermissionButton:n.a},data:function(){return{pagesize:10,currentPage:1,total:0,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},pageInfo:new o.a(0,[5,10,15],5),dialogFormVisible:!1,dialogVisible:!1,formLabelWidth:"120px",orderStatus:[{value:"0",label:"未处理"},{value:"1",label:"已处理"},{value:"2",label:"已拒绝"}],format:{withdraw_status:"",game_id:"",dateArr:[new Date((new Date).getTime()-6048e5),new Date]},tableStyle:[{label:"编号",prop:"WithdrawId",width:""},{label:"用户id",prop:"uid",width:""},{label:"提现金额",prop:"Amount",width:""},{label:"余额",prop:"Balance",width:""},{label:"需转金额",prop:"transfer_amount",width:""},{label:"手续费",prop:"fee",width:""},{label:"兑换方式",prop:"WithdrawChannel",width:""},{label:"申请时间",prop:"CreateAt",width:"180"},{label:"状态",prop:"Status",width:""},{label:"风控提示",prop:"warn",width:""},{label:"操作",prop:"action",width:"300"}],records:[],form:{alipay_account:"",name:""},form2:{pass:"",order_id:"",remark:""}}},methods:{getWithdrawRec:function(){var e=this,t={page:this.currentPage,limit:this.pagesize};this.$http.get("v1/backend/operation/withdraws",{params:t}).then(function(t){console.log(t),200==t.data.code&&(e.records=t.data.data,e.total=t.data.total)})},searchData:function(){var e=this,t={page:this.currentPage,limit:this.pagesize,status:this.withdraw_status?Number(this.format.withdraw_status):-1,user_id:Number(this.format.game_id),start_time:this.format.dateArr?parseInt(new Date(Number(this.format.dateArr[0])).getTime()/1e3):0,end_time:this.format.dateArr?parseInt(new Date(Number(this.format.dateArr[1])).getTime()/1e3):0};this.$http.get("v1/backend/operation/withdraws",{params:t}).then(function(t){console.log(t),200===t.data.code&&(e.records=t.data.data,e.total=t.data.total)})},handleDetail:function(e){console.log(e),this.dialogFormVisible=!0;var t=JSON.parse(e.WithdrawInfo);this.form.alipay_account=t.account,this.form.name=t.Name},handlePass:function(e){console.log(e),this.dialogVisible=!0,this.form2.pass="通过",this.form2.order_id=e.WithdrawId},handleReject:function(e){console.log(e),this.dialogVisible=!0,this.form2.order_id=e.WithdrawId},checkOrderStatus:function(){var e=this,t={order_id:Number(this.form2.order_id),action:this.form2.pass?1:2,remark:this.form2.remark};this.$http.post("v1/backend/operation/withdraws",t).then(function(t){console.log(t),200==t.data.code&&(e.dialogVisible=!1,e.getWithdrawRec())})},handleSizeChange:function(e){this.pagesize=e,this.getWithdrawRec()},handleCurrentChange:function(e){this.currentPage=e,this.getWithdrawRec()}},mounted:function(){this.getWithdrawRec()}}),m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"WithdrawRec-main"}},[a("input-area",[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"medium"},model:{value:e.format.withdraw_status,callback:function(t){e.$set(e.format,"withdraw_status",t)},expression:"format.withdraw_status"}},e._l(e.orderStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{attrs:{placeholder:"请输入游戏id",size:"medium",clearable:""},model:{value:e.format.game_id,callback:function(t){e.$set(e.format,"game_id",t)},expression:"format.game_id"}}),e._v(" "),a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.format.dateArr,callback:function(t){e.$set(e.format,"dateArr",t)},expression:"format.dateArr"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.searchData}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"bd"},[a("info-table",{attrs:{"table-style":e.tableStyle,records:e.records,"page-info":e.pageInfo,"hide-page":!0}},[a("info-table-item",{attrs:{"table-style":e.tableStyle},scopedSlots:e._u([{key:"default",fn:function(t){return["WithdrawChannel".indexOf(t.prop)>=0?[0==t.row.WithdrawChannel?a("span",[e._v("支付宝")]):e._e(),e._v(" "),1==t.row.WithdrawChannel?a("span",[e._v("银行卡")]):e._e(),e._v(" "),2==t.row.WithdrawChannel?a("span",[e._v("微信")]):e._e()]:e._e(),e._v(" "),"Status".indexOf(t.prop)>=0?[0==t.row.Status?a("span",[e._v("未处理")]):e._e(),e._v(" "),1==t.row.Status?a("span",[e._v("已处理")]):e._e(),e._v(" "),2==t.row.Status?a("span",[e._v("已驳回")]):e._e()]:e._e(),e._v(" "),"action"===t.prop?[0==t.row.Status?a("span",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handlePass(t.row)}}},[e._v("通过")]),e._v(" "),a("el-button",{staticStyle:{"background-color":"#ff5732"},attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleReject(t.row)}}},[e._v("驳回")])],1):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("详情")])]:e._e(),e._v(" "),["action",,"WithdrawChannel","Status"].indexOf(t.prop)<0?[e._v(e._s(t.row[t.prop]))]:e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"提现账号信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"支付宝账号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.form.alipay_account,callback:function(t){e.$set(e.form,"alipay_account",t)},expression:"form.alipay_account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"订单审核",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.form2}},[a("el-form-item",{attrs:{label:"订单id","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.form2.order_id,callback:function(t){e.$set(e.form2,"order_id",t)},expression:"form2.order_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.remark,callback:function(t){e.$set(e.form2,"remark",t)},expression:"form2.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.checkOrderStatus}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=a("C7Lr")(c,m,!1,function(e){a("XB/v")},"data-v-a0a63034",null);t.default=p.exports},"XB/v":function(e,t){}});
//# sourceMappingURL=18.cca4220995700ab54c3f.js.map