webpackJsonp([28],{"2STE":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("MgeX"),l=a.n(r),i=a("ZLEe"),o=a.n(i),s=a("4YfN"),n=a.n(s),c=a("lC5x"),u=a.n(c),d=a("3cXf"),f=a.n(d),p=a("J0Oq"),m=a.n(p),b={data:function(){return{tableData:[],title:"新增任务",visible:!1,form:{task_type:"",task_describe:"",task_target:"",fertilizers:"",is_draw:!1,task_guide:""},rules:{task_type:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],task_describe:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],task_target:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],fertilizers:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],is_draw:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],task_guide:[{required:!0,message:"必填项不可以为空",trigger:"blur"}]},optiontype:[{value:1,label:"登录游戏大厅"},{value:2,label:"分享微信朋友"},{value:3,label:"分享微信朋友圈"},{value:4,label:"游戏流水达到特定值"},{value:5,label:"发展下级数量达到特定值"}],optionguide:[{value:1,label:"无指引"},{value:2,label:"跳转分享微信朋友圈"},{value:3,label:"跳转分享微信朋友"}],keys:"",id:"",allData:{},currentData:{},currentIndex:"",loading:!1}},created:function(){this.initData()},methods:{add:function(){this.editForm(!0,"新增",this.form)},send:function(){var t=this;return m()(u.a.mark(function e(){var a,r,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,a={},t.tableData.forEach(function(t,e){a[e+1]=t}),t.currentData.ac_content.task=a,e.next=6,t.$http.HallFunConfig.PostActivityNew3({keys:t.keys,values:f()(t.allData),id:t.id});case 6:r=e.sent,1===(l=r.data).code&&"ok"===l.msg?(t.loading=!1,t.$message({type:"success",message:"发送服务器配置成功!"})):(t.loading=!1,t.$message({type:"warning",message:"发送服务器配置失败!"}));case 9:case"end":return e.stop()}},e,t)}))()},handleEdit:function(t,e){this.currentIndex=t,this.editForm(!0,"编辑",n()({},e))},handleDelete:function(t,e){this.tableData=this.tableData.filter(function(e,a){return t!==a})},onSubmit:function(t,e){var a,r=this;this.$refs[t].validate((a=m()(u.a.mark(function t(a){var l;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}"新增"===e?r.tableData.push(r.form):"编辑"===e&&(l=[],r.tableData.forEach(function(t,e){l.push(t),r.currentIndex===e&&(l[e]=r.form)}),r.tableData=l),r.editForm(!1,"新增",r.form),t.next=7;break;case 5:return r.$message({type:"warning",message:"必填的项不可以为空!"}),t.abrupt("return",!1);case 7:case"end":return t.stop()}},t,r)})),function(t){return a.apply(this,arguments)}))},back:function(){},editForm:function(t,e,a){this.visible=t,this.title=e,this.form=a},initData:function(){var t=this;return m()(u.a.mark(function e(){var a,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.HallFunConfig.GetActivityNew3({key:"activity_new.lua"});case 2:a=e.sent,r=a.data,t.keys=r.data[0].sys_key,t.id=r.data[0].id,i=r.data[0].sys_val,t.allData=JSON.parse(i),o()(t.allData).forEach(function(e){"10003"===t.allData[e].ac_type&&(t.currentData=t.allData[e],t.tableData=l()(t.allData[e].ac_content.task),t.total=t.tableData.length)});case 9:case"end":return e.stop()}},e,t)}))()}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"MT_TaskConfig","element-loading-text":"正在上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.6)"}},[a("div",{staticClass:"title"},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.send}},[t._v("发送服务器配置")])],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":"","tooltip-effect":"dark",border:""}},[a("el-table-column",{attrs:{prop:"task_type",label:"任务类型",align:"center",width:"300px","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"task_describe",label:"任务描述",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"fertilizers",label:"任务奖励肥料数量",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"task_target",label:"任务目标数量",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_draw",label:"是否摇奖次数必须",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.row.is_draw,callback:function(a){t.$set(e.row,"is_draw",a)},expression:"scope.row.is_draw"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"task_guide",label:"任务指引",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"week_change",label:"操作",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"form"},[a("el-dialog",{attrs:{title:t.title,visible:t.visible,"destroy-on-close":!0,width:"60%"},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{rules:t.rules,model:t.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"任务类型",prop:"task_type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.task_type,callback:function(e){t.$set(t.form,"task_type",e)},expression:"form.task_type"}},t._l(t.optiontype,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"任务描述",prop:"task_describe"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"任务描述"},model:{value:t.form.task_describe,callback:function(e){t.$set(t.form,"task_describe",e)},expression:"form.task_describe"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务目标数量",prop:"task_target"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"0"},model:{value:t.form.task_target,callback:function(e){t.$set(t.form,"task_target",e)},expression:"form.task_target"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"肥料奖励数量",prop:"fertilizers"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"0"},model:{value:t.form.fertilizers,callback:function(e){t.$set(t.form,"fertilizers",e)},expression:"form.fertilizers"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否摇奖次数必须",prop:"fertilizers"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.is_draw,callback:function(e){t.$set(t.form,"is_draw",e)},expression:"form.is_draw"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务指引",prop:"task_guide"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.task_guide,callback:function(e){t.$set(t.form,"task_guide",e)},expression:"form.task_guide"}},t._l(t.optionguide,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form",t.title)}}},[t._v("确认")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.back()}}},[t._v("返 回")])],1)],1)],1)])},staticRenderFns:[]};var g=a("C7Lr")(b,v,!1,function(t){a("LA71")},"data-v-78fda98b",null);e.default=g.exports},LA71:function(t,e){}});
//# sourceMappingURL=28.62854e83ec9a7c835bc2.js.map