webpackJsonp([72],{JWL4:function(t,e){},ypOL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("lC5x"),r=a.n(n),l=a("J0Oq"),i=a.n(l),o=(a("EuRQ"),{name:"LTV_report",data:function(){return{avator_nameO:"",optionchannels:[],start_time:"",end_time:"",tableData:[],currentPage:1,limit:10,total:"",startDate:"",endDate:"",titleData:[{prop:"date",label:"新增日"},{prop:"add_count",label:"新增用户"},{prop:"avg_cost",label:"平均价值"},{prop:"pay_1",label:"第1天"},{prop:"pay_2",label:"第2天"},{prop:"pay_3",label:"第3天"},{prop:"pay_4",label:"第4天"},{prop:"pay_5",label:"第5天"},{prop:"pay_6",label:"第6天"},{prop:"pay_7",label:"第7天"},{prop:"pay_8",label:"第8天"},{prop:"pay_9",label:"第9天"},{prop:"pay_10",label:"第10天"},{prop:"pay_11",label:"第11天"},{prop:"pay_12",label:"第12天"},{prop:"pay_13",label:"第13天"},{prop:"pay_14",label:"第14天"},{prop:"pay_15",label:"第15天"},{prop:"pay_30",label:"第30天"},{prop:"pay_45",label:"第45天"}]}},created:function(){var t=(new Date).getTime();this.end_time=t,this.start_time=t-6048e5,this.initChannel(),this.getData()},methods:{search:function(){this.getData()},handleSizeChange:function(t){this.limit=t,this.current=1,this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},initTime:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())},initChannel:function(){var t=this;return i()(r.a.mark(function e(){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.OperationMan.GetChannels();case 2:a=e.sent,n=[],a.data.data.forEach(function(t){n.push(t.name)}),n.forEach(function(e,a){t.optionchannels.push({avator_nameO:e,levelO:a})}),t.optionchannels.unshift({avator_nameO:"所有渠道",levelO:-1});case 7:case"end":return e.stop()}},e,t)}))()},getData:function(){console.log(this.start_time,this.end_time),console.log(Math.ceil(this.start_time/1e3),Math.ceil(this.end_time/1e3)),this.initData({page:this.currentPage,limit:this.limit,start_date:Math.ceil(this.start_time/1e3),end_data:Math.ceil(this.end_time/1e3),channel_name:"所有渠道"===this.avator_nameO?"":this.avator_nameO})},initData:function(t){var e=this;return i()(r.a.mark(function a(){var n,l;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http.DataAnalysis.GetrReportLtv(t);case 2:n=a.sent,l=n.data,l.data.forEach(function(t){t.date=e.initTime(1e3*t.date)}),e.tableData=l.data,e.total=l.total;case 8:case"end":return a.stop()}},a,e)}))()}}}),p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"LTVReport"}},[a("div",{staticClass:"title"},[a("el-select",{staticStyle:{"margin-top":"10px",width:"200px"},attrs:{placeholder:"请选择渠道"},model:{value:t.avator_nameO,callback:function(e){t.avator_nameO=e},expression:"avator_nameO"}},t._l(t.optionchannels,function(t){return a("el-option",{key:t.levelO,attrs:{label:t.avator_nameO,value:t.avator_nameO}})}),1),t._v(" "),a("el-date-picker",{staticStyle:{"margin-top":"10px",width:"200px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyyMMdd","value-format":"timestamp"},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}}),t._v("\n    -\n    "),a("el-date-picker",{staticStyle:{"margin-top":"10px",width:"200px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyyMMdd","value-format":"timestamp"},model:{value:t.end_time,callback:function(e){t.end_time=e},expression:"end_time"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查找")])],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"date",order:"descending"},data:t.tableData,"highlight-current-row":"","tooltip-effect":"dark",border:""}},t._l(t.titleData,function(t,e){return a("el-table-column",{key:e,attrs:{fixed:("新增日"===t.label||"新增用户"===t.label||"平均价值"===t.label)&&"left",prop:t.prop,label:t.label,align:"center",width:"120","show-overflow-tooltip":""}})}),1),t._v(" "),t.total>5?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)])},staticRenderFns:[]};var s=a("C7Lr")(o,p,!1,function(t){a("JWL4")},"data-v-2e91fe3a",null);e.default=s.exports}});