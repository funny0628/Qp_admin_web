webpackJsonp([62],{"5uL3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("lC5x"),l=i.n(a),n=i("J0Oq"),r=i.n(n),o=i("EuRQ"),s={data:function(){return{uid:"",ids:"",type_id:"",Title:"",tableData:[],value:"",currentPage:1,limit:10,total:0,visible:!1,disabled:!1,disabledID:!1,rules:{send_name:[{required:!0,message:"必填项不能为空",trigger:"blur"}],title:[{required:!0,message:"必填项不能为空",trigger:"blur"}],content:[{required:!0,message:"必填项不能为空",trigger:"blur"}],coins:[{required:!0,message:"必填项不能为空",trigger:"blur"}],uid:[{required:!0,message:"必填项不能为空",trigger:"blur"}]},form:{send_name:"",title:"",content:"",coins:"",uid:[]},title:"新增"}},created:function(){this.initdata({page:this.currentPage,limit:this.limit,mail_type:2})},methods:{writeEmail:function(){this.editForm("新增",!0,!1,!1,{})},search:function(){""===this.ids?this.ids=0:""===this.type_id?this.type_id=0:""===this.uid&&(this.uid=0),this.initdata({page:this.currentPage,limit:this.limit,mail_type:2,title:this.Title,uid:+this.uid,ids:+this.ids,type_id:+this.type_id}),this.ids="",this.type_id="",this.uid="",this.Title=""},handleEdit:function(t){t.mail_id=t.id,this.editForm("编辑",!0,!1,!0,Object(o.a)(t))},detail:function(t){this.editForm("邮件详情",!0,!0,!0,Object(o.a)(t))},send:function(t){var e=this;return r()(l.a.mark(function i(){var a,n,r;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a={mail_type:2,send_status:2,mail_id:t.id},i.next=3,e.$http.HallFunConfig.patchEmail(a);case 3:n=i.sent,1===(r=n.data).code&&"ok"===r.msg&&e.initdata({page:e.currentPage,limit:e.limit,mail_type:2});case 6:case"end":return i.stop()}},i,e)}))()},handleSizeChange:function(t){this.limit=t,this.currentPage=1,this.initdata({page:this.currentPage,limit:this.limit,mail_type:2})},handleCurrentChange:function(t){this.currentPage=t,this.initdata({page:this.currentPage,limit:this.limit,mail_type:2})},onSubmit:function(t,e){var i,a=this;this.$refs[t].validate((i=r()(l.a.mark(function t(i){var n,r,s,c,u,d;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=25;break}if("新增"!==e){t.next=12;break}return console.log(a.form),(n=Object(o.a)(a.form)).mail_type=2,t.next=7,a.$http.HallFunConfig.PostEmail(n);case 7:r=t.sent,1===(s=r.data).code&&"ok"===s.msg&&a.initdata({page:a.currentPage,limit:a.limit,mail_type:2}),t.next=22;break;case 12:if("编辑"!==e){t.next=21;break}return c={send_name:a.form.send_name,title:a.form.title,content:a.form.content,coins:a.form.coins,uid:a.form.uid,mail_type:2,mail_id:a.form.mail_id},t.next=16,a.$http.HallFunConfig.PutEmail(c);case 16:u=t.sent,1===(d=u.data).code&&"ok"===d.msg&&a.initdata({page:a.currentPage,limit:a.limit,mail_type:2}),t.next=22;break;case 21:case 22:a.editForm("新增",!1,!1,!1,{}),t.next=27;break;case 25:return console.log("error submit!!"),t.abrupt("return",!1);case 27:case"end":return t.stop()}},t,a)})),function(t){return i.apply(this,arguments)}))},editForm:function(t,e,i,a,l){this.title=t,this.visible=e,this.disabled=i,this.disabledID=a,this.form=l},formateData:function(t){var e=this;return t.forEach(function(t){1===t.send_status?(t.send_status="待发送",e.sendShow=!0):2===t.send_status&&(t.send_status=1===t.read_status?"未读":"已读")}),t},initdata:function(t){var e=this;return r()(l.a.mark(function i(){var a,n,r;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.$http.HallFunConfig.GetEmail(t);case 2:a=i.sent,n=a.data,r=e.formateData(n.data),e.tableData=r,e.total=n.total;case 7:case"end":return i.stop()}},i,e)}))()}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"platformEmail"}},[i("div",{staticClass:"title"},[i("div",{staticClass:"botton"},[i("el-button",{attrs:{type:"primary"},on:{click:t.writeEmail}},[t._v("写邮件")])],1),t._v("\n    邮件ID\n    "),i("el-input",{staticStyle:{"margin-top":"10px",width:"200px"},model:{value:t.ids,callback:function(e){t.ids=e},expression:"ids"}}),t._v("\n    收件人\n    "),i("el-input",{staticStyle:{"margin-top":"10px",width:"200px"},model:{value:t.uid,callback:function(e){t.uid=e},expression:"uid"}}),t._v("\n    标题\n    "),i("el-input",{staticStyle:{"margin-top":"10px",width:"200px"},model:{value:t.Title,callback:function(e){t.Title=e},expression:"Title"}}),t._v("\n    状态\n    "),i("el-select",{staticStyle:{"margin-top":"10px",width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.type_id,callback:function(e){t.type_id=e},expression:"type_id"}},[i("el-option",{attrs:{label:"已读",value:1}}),t._v(" "),i("el-option",{attrs:{label:"未读",value:2}}),t._v(" "),i("el-option",{attrs:{label:"已经领取",value:3}}),t._v(" "),i("el-option",{attrs:{label:"未领取",value:4}}),t._v(" "),i("el-option",{attrs:{label:"待发送",value:5}})],1),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查找")])],1),t._v(" "),i("div",{staticClass:"table"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"","highlight-current-row":"",data:t.tableData,"tooltip-effect":"dark"}},[i("el-table-column",{attrs:{prop:"id",label:"ID",align:"center","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"create_time",label:"创建时间",align:"center","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"send_name",label:"发件人",align:"center","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"uid",label:"收件人",align:"center","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"邮件标题",align:"center","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"coins",label:"邮件道具(金币)",align:"center","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"send_status",label:"邮件状态",align:"center","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"change",label:"操作",align:"center","show-overflow-tooltip":"",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.detail(e.row)}}},[t._v("详情")]),t._v(" "),"待发送"===e.row.send_status?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.send(e.row)}}},[t._v("发送邮件")]):t._e()]}}])})],1),t._v(" "),t.total>5?i("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),i("div",{staticClass:"dialog"},[i("el-dialog",{attrs:{title:t.title,visible:t.visible,"destroy-on-close":!0},on:{"update:visible":function(e){t.visible=e}}},[i("el-form",{ref:"form",attrs:{disabled:t.disabled,rules:t.rules,model:t.form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"收件人ID",prop:"uid"}},[i("el-input",{attrs:{placeholder:"多个以逗号分隔 如: 1,2,3,4",disabled:t.disabledID},model:{value:t.form.uid,callback:function(e){t.$set(t.form,"uid",e)},expression:"form.uid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"发件人昵称",prop:"send_name"}},[i("el-input",{attrs:{placeholder:"发件人昵称"},model:{value:t.form.send_name,callback:function(e){t.$set(t.form,"send_name",e)},expression:"form.send_name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"邮件标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"邮件标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"邮件内容",prop:"content"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"金币",prop:"coins"}},[i("el-input",{attrs:{placeholder:"金币"},model:{value:t.form.coins,callback:function(e){t.$set(t.form,"coins",e)},expression:"form.coins"}})],1)],1),t._v(" "),"邮件详情"!=t.title?i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form",t.title)}}},[t._v("确 定")])],1):t._e()],1)],1)])},staticRenderFns:[]};var u=i("C7Lr")(s,c,!1,function(t){i("YypW")},"data-v-4034b351",null);e.default=u.exports},YypW:function(t,e){}});
//# sourceMappingURL=62.cc2c94ded9f56e8fec46.js.map