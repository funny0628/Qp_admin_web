webpackJsonp([106],{BwcQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("3cXf"),i=a.n(o),l=a("a3Yh"),r=a.n(l),n=a("iVUn"),s=a("fftp"),c=a("zhQY"),d=a("Z/hU"),m=a("2u00"),p=(a("y35B"),a("22Zk")),f=a("06fe"),u=(d.a,f.a,p.a,n.a,s.a,m.a,{name:"lobby_flyer_config",extends:d.a,components:{InfoTableItem:f.a,InputArea:p.a,SelectTime:n.a,InfoTable:s.a,PermissionButton:m.a},data:function(){var t;return t={dialogTitle:"",pagesize:10,currentPage:1,total:0,formLabelWidth:"120px",dialogVisible:!1,tableStyle:[{label:"渠道名称",prop:"channel",width:""},{label:"KEY",prop:"channel_key",width:""},{label:"图片一",prop:"pic_one_url",width:""},{label:"图片二",prop:"pic_two_url",width:""},{label:"图片三",prop:"pic_three_url",width:""},{label:"操作时间",prop:"create_time",width:""},{label:"操作",prop:"action",width:""}],tableData:[],pageInfo:new c.a(1,[5,10,15,20],6),dialogFormVisible:!1,form:{channel_name:"",channel_key:"",word1:"",word1_type:"",word1_url:"",word1_jump_position:"",word2:"",word2_type:"",word2_url:"",word2_jump_position:"",word3:"",word3_type:"",word3_url:"",word3_jump_position:""},channelOpts:[],wordTypeOpts:[],jumpPathOpts:[],form2:{name:""}},r()(t,"formLabelWidth","100px"),r()(t,"fileList",{imgList1:[],imgList2:[],imgList3:[]}),r()(t,"imageUrl",{imgList1:"",imgList2:"",imgList3:""}),r()(t,"uploadHeaders",{Authorization:"application/json"}),t},methods:{resetForm:function(){this.form={channel_name:"",channel_key:"",word1:"",word1_type:"",word1_url:"",word1_jump_position:"",word2:"",word2_type:"",word2_url:"",word2_jump_position:"",word3:"",word3_type:"",word3_url:"",word3_jump_position:""}},getChannelList:function(){var t=this;this.$http.post("v1/backend/no_channel",{type_id:1,add_id:4}).then(function(e){console.log(e),1===e.data.code&&(t.channelOpts=e.data.data)})},getPicTypeList:function(){var t=this;this.$http.get("v1/backend/lobby/name_type",{params:{type_id:7}}).then(function(e){console.log(e),1===e.data.code&&(t.wordTypeOpts=e.data.data)})},getJumpPathList:function(){var t=this;this.$http.get("v1/backend/lobby/name_type",{params:{type_id:8}}).then(function(e){console.log(e),1===e.data.code&&(t.jumpPathOpts=e.data.data)})},getAdvertiseConfList:function(){var t=this;this.$http.get("v1/backend/lobby/flyer",{params:{page:this.currentPage,limit:this.pagesize}}).then(function(e){console.log(e),t.tableData=e.data.data,t.total=e.data.total})},openAddDialog:function(){this.dialogFormVisible=!0,this.imageUrl={imgList1:"",imgList2:"",imgList3:""},this.getPicTypeList(),this.resetForm(),this.getChannelList()},addNewChannel:function(){var t=this;if(this.form.id){var e={banner_id:this.form.id,name:this.form.channel_name,key:this.form.channel_key,name_one:"我是图片一",url_one:this.imageUrl.imgList1,type_one:JSON.parse(this.form.word1_type),name_two:"我是图片二",url_two:this.imageUrl.imgList2,type_two:JSON.parse(this.form.word2_type),name_three:"我是图片三",url_three:this.imageUrl.imgList3,type_three:JSON.parse(this.form.word3_type)};this.$http.put("v1/backend/lobby/flyer",e).then(function(e){console.log(e),1===e.data.code&&(t.dialogFormVisible=!1,t.getAdvertiseConfList())})}else{var a={name:this.form.channel_name,key:this.form.channel_key,name_one:"我是图片一",url_one:this.imageUrl.imgList1,type_one:Number(this.form.word1_type),jump_id_one:Number(this.form.word1_jump_position),name_two:"我是图片二",url_two:this.imageUrl.imgList2,type_two:Number(this.form.word2_type),jump_id_two:Number(this.form.word2_jump_position),name_three:"我是图片三",url_three:this.imageUrl.imgList3,type_three:Number(this.form.word3_type),jump_id_three:Number(this.form.word3_jump_position)};this.$http.post("v1/backend/lobby/flyer",a).then(function(e){console.log(e),1===e.data.code&&(t.dialogFormVisible=!1,t.getAdvertiseConfList())})}},handleEdit:function(t){console.log(t),this.getPicTypeList(),this.getJumpPathList(),this.dialogFormVisible=!0,this.dialogTitle="更新大厅宣传页配置信息",this.form.id=t.id,this.form.channel_name=t.channel,this.form.channel_key=t.channel_key,this.form.word1_type=i()(t.pic_one_type),this.form.word1_url=t.pic_one_url,this.form.word2_type=i()(t.pic_two_type),this.form.word2_url=t.pic_two_url,this.form.word3_type=i()(t.pic_three_type),this.form.word3_url=t.pic_three_url,this.form.word1_jump_position=i()(t.dump_id1),this.form.word2_jump_position=i()(t.dump_id2),this.form.word3_jump_position=i()(t.dump_id3),this.imageUrl.imgList1=t.pic_one_url,this.imageUrl.imgList2=t.pic_two_url,this.imageUrl.imgList3=t.pic_three_url},handleDelete:function(t){var e=this;console.log(t),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete("v1/backend/lobby/flyer",{params:{id:t.id}}).then(function(t){1===t.data.code&&(e.getAdvertiseConfList(),e.$message({type:"success",message:"删除成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},search:function(){},handleSizeChange:function(t){this.pagesize=t,this.getAdvertiseConfList()},handleCurrentChange:function(t){this.currentPage=t,this.getAdvertiseConfList()},handleAvatarSuccess:function(t,e){},handleChange:function(t,e,a){this.fileList[a]=e},beforeUpload:function(t){},uploadFile:function(t){var e=this,a=new FormData;this.fileList[t].forEach(function(t){a.append("filename",t.raw),a.append("types",1)}),this.$http.post("v1/backend/upload",a).then(function(a){1===a.data.code&&(e.imageUrl[t]=a.data.path)})}},watch:{"form.word1_type":function(t,e){var a=this;"4"===t&&this.getJumpPathList(),"2"===t||"1"!==t?this.$nextTick(function(){a.form.word1_url=a.form.word1}):this.$nextTick(function(){a.form.word1_url=""})}},mounted:function(){this.getAdvertiseConfList()}}),_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"HallAdvertiseConf-main"}},[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"add_lobby_flyer",expression:"'add_lobby_flyer'"}],staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.openAddDialog}},[t._v("添加")]),t._v(" "),a("div",{staticClass:"bd"},[a("info-table",{directives:[{name:"has",rawName:"v-has",value:"lobby_flyer_list",expression:"'lobby_flyer_list'"}],attrs:{search:t.search,"table-style":t.tableStyle,records:t.tableData,"page-info":t.pageInfo,"hide-page":!0}},[a("info-table-item",{attrs:{"table-style":t.tableStyle},scopedSlots:t._u([{key:"default",fn:function(e){return["pic_one_url"===e.prop?[a("img",{attrs:{src:e.row[e.prop],width:"50",height:"50",alt:""}})]:t._e(),t._v(" "),"pic_two_url"===e.prop?[a("img",{attrs:{src:e.row[e.prop],width:"50",height:"50",alt:""}})]:t._e(),t._v(" "),"pic_three_url"===e.prop?[a("img",{attrs:{src:e.row[e.prop],width:"50",height:"50",alt:""}})]:t._e(),t._v(" "),"action"===e.prop?[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"modify_lobby_flyer",expression:"'modify_lobby_flyer'"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"delete_lobby_flyer",expression:"'delete_lobby_flyer'"}],attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]:t._e(),t._v(" "),["action","pic_one_url","pic_two_url","pic_three_url"].indexOf(e.prop)<0?[t._v(t._s(e.row[e.prop]))]:t._e()]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form,enctype:"multipart/form-data"}},[a("el-form-item",{attrs:{label:"渠道名","label-width":t.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择渠道名"},model:{value:t.form.channel_name,callback:function(e){t.$set(t.form,"channel_name",e)},expression:"form.channel_name"}},t._l(t.channelOpts,function(t){return a("el-option",{key:t.id,attrs:{label:t.channel_name,value:t.channel_name}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"KEY","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.channel_key,callback:function(e){t.$set(t.form,"channel_key",e)},expression:"form.channel_key"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片一","label-width":t.formLabelWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"",fileList:t.fileList.imgList1,accept:"image/jpeg, image/png","show-file-list":!1,headers:t.uploadHeaders,"on-change":function(e,a,o){return t.handleChange(e,a,"imgList1")},"before-upload":t.beforeUpload,"on-success":t.handleAvatarSuccess,"http-request":function(e){return t.uploadFile("imgList1")}}},[t.imageUrl.imgList1?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl.imgList1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",[t._v(t._s(this.imageUrl.imgList1))])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"图片一类型","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择文字一类型"},model:{value:t.form.word1_type,callback:function(e){t.$set(t.form,"word1_type",e)},expression:"form.word1_type"}},t._l(t.wordTypeOpts,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:JSON.stringify(t.id)}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},["4"!==t.form.word1_type?a("el-form-item",{attrs:{label:"URL","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.word1_url,callback:function(e){t.$set(t.form,"word1_url",e)},expression:"form.word1_url"}})],1):a("el-form-item",{attrs:{label:"跳转位置","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.word1_jump_position,callback:function(e){t.$set(t.form,"word1_jump_position",e)},expression:"form.word1_jump_position"}},t._l(t.jumpPathOpts,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:JSON.stringify(t.id)}})}),1)],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图片二","label-width":t.formLabelWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"",fileList:t.fileList.imgList2,accept:"image/jpeg, image/png","show-file-list":!1,headers:t.uploadHeaders,"on-change":function(e,a,o){return t.handleChange(e,a,"imgList2")},"before-upload":t.beforeUpload,"on-success":t.handleAvatarSuccess,"http-request":function(e){return t.uploadFile("imgList2")}}},[t.imageUrl.imgList2?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl.imgList2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"图片二类型","label-width":t.formLabelWidth}},[a("el-select",{model:{value:t.form.word2_type,callback:function(e){t.$set(t.form,"word2_type",e)},expression:"form.word2_type"}},t._l(t.wordTypeOpts,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:JSON.stringify(t.id)}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},["4"!==t.form.word2_type?a("el-form-item",{attrs:{label:"URL","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.word2_url,callback:function(e){t.$set(t.form,"word2_url",e)},expression:"form.word2_url"}})],1):a("el-form-item",{attrs:{label:"跳转位置","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.word2_jump_position,callback:function(e){t.$set(t.form,"word2_jump_position",e)},expression:"form.word2_jump_position"}},t._l(t.jumpPathOpts,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:JSON.stringify(t.id)}})}),1)],1)],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"图片三","label-width":t.formLabelWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"",fileList:t.fileList.imgList3,accept:"image/jpeg, image/png","show-file-list":!1,headers:t.uploadHeaders,"on-change":function(e,a,o){return t.handleChange(e,a,"imgList3")},"before-upload":t.beforeUpload,"on-success":t.handleAvatarSuccess,"http-request":function(e){return t.uploadFile("imgList3")}}},[t.imageUrl.imgList3?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl.imgList3}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"图片三类型","label-width":t.formLabelWidth}},[a("el-select",{model:{value:t.form.word3_type,callback:function(e){t.$set(t.form,"word3_type",e)},expression:"form.word3_type"}},t._l(t.wordTypeOpts,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:JSON.stringify(t.id)}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},["4"!==t.form.word3_type?a("el-form-item",{attrs:{label:"URL","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.word3_url,callback:function(e){t.$set(t.form,"word3_url",e)},expression:"form.word3_url"}})],1):a("el-form-item",{attrs:{label:"跳转位置","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.word3_jump_position,callback:function(e){t.$set(t.form,"word3_jump_position",e)},expression:"form.word3_jump_position"}},t._l(t.jumpPathOpts,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:JSON.stringify(t.id)}})}),1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addNewChannel}},[t._v("确 定")])],1)],1),t._v(" "),a("div",[a("el-dialog",{attrs:{title:"添加宣传页",visible:t.dialogVisible,width:"40%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{model:t.form2}},[a("el-form-item",[a("table",{staticStyle:{width:"80%"},attrs:{cellspacing:"0",cellpadding:"10",border:"1"}},[a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("选择渠道")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("el-select",{attrs:{placeholder:"请选择渠道"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},[a("el-option",{attrs:{label:"渠道一",value:""}}),t._v(" "),a("el-option",{attrs:{label:"渠道二",value:""}})],1)],1)])])]),t._v(" "),a("el-form-item",[a("table",{staticStyle:{"border-color":"#c0c4cc",width:"80%"},attrs:{border:"1",cellspacing:"0",cellpadding:"10"}},[a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("上传内容1")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name",e)},expression:"form2.name"}})],1)]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("海报类型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("轮播海报")])]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("选择动作类型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("跳转")])]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("跳转地址")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name",e)},expression:"form2.name"}})],1)])])]),t._v(" "),a("el-form-item",[a("table",{staticStyle:{"border-color":"#c0c4cc",width:"80%"},attrs:{border:"1",cellspacing:"0",cellpadding:"10"}},[a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("上传内容2")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name",e)},expression:"form2.name"}})],1)]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("海报类型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("轮播海报")])]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("选择动作类型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("复制")])]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("复制内容")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name",e)},expression:"form2.name"}})],1)])])]),t._v(" "),a("el-form-item",[a("table",{staticStyle:{"border-color":"#c0c4cc",width:"80%"},attrs:{border:"1",cellspacing:"0",cellpadding:"10"}},[a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("上传内容3")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:t.form2.name,callback:function(e){t.$set(t.form2,"name",e)},expression:"form2.name"}})],1)]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("海报类型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("轮播海报")])]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("选择动作类型")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("加入游戏")])]),t._v(" "),a("tr",[a("td",{staticStyle:{width:"150px","text-align":"center","background-color":"#f2f2f2"}},[t._v("选择游戏")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("el-select",{attrs:{placeholder:"请选择游戏类型"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},[a("el-option",{attrs:{label:"游戏一",value:""}}),t._v(" "),a("el-option",{attrs:{label:"游戏二",value:""}}),t._v(" "),a("el-option",{attrs:{label:"游戏三",value:""}})],1)],1)])])])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(u,_,!1,function(t){a("Cvqf")},"data-v-0abf6c35",null);e.default=h.exports},Cvqf:function(t,e){}});
//# sourceMappingURL=106.b32fcd99ba8246f5247d.js.map