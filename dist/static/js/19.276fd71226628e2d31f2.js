webpackJsonp([19],{gaYi:function(t,e){},vmZU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("lC5x"),i=a.n(r),l=a("J0Oq"),o=a.n(l),n=a("EuRQ"),s={name:"payList",data:function(){return{orderlist:["ascending","descending"],tableData:[],total:0,currentPage:1,limit:10,visible:!1,title:"添加",searchinput:"",selectList:[],form:{id:"",pay_name:"",pay_channel:"",pay_way:"",is_diy:"",money_num:"",diy_max:"",diy_min:"",sort_num:"",pay_desc:"",o_status:"",o_activity:"",op_name:"op_name"},rules:{sort_num:[{required:!0,message:"必填项不可以为空,只能输入数字",trigger:"blur"}],pay_name:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],pay_channel:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],pay_way:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],is_diy:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],diy_max:[{required:!0,message:"必填项不可以为空,只能输入数字",trigger:"blur"}],diy_min:[{required:!0,message:"必填项不可以为空,只能输入数字",trigger:"blur"}],money_num:[{required:!0,message:"必填项不可以为空,只能输入数字",trigger:"blur"}],pay_desc:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],o_activity:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],o_status:[{required:!0,message:"必填项不可以为空",trigger:"blur"}]}}},created:function(){this.initdata({page:this.currentPage,limit:this.limit,title:this.searchinput})},methods:{handleSelectionChange:function(t){var e=t.map(function(t){return t.id});this.selectList=e},handleEdit:function(t,e){this.editForm("更新",!0,this.formateNum(Object(n.a)(t))),this.$refs[e].resetFields()},handleDelete:function(t,e){var a=this;this.$confirm("确认删除吗？","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$http.HallFunConfig.DeletePaylist({id:e.id});case 2:r=t.sent,r.data,a.initdata({page:a.currentPage,limit:a.limit,title:a.searchinput}),a.$message({type:"success",message:"删除成功!"});case 6:case"end":return t.stop()}},t,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(t){this.limit=t,this.currentPage=1,this.initdata({page:this.currentPage,limit:this.limit,title:this.searchinput})},handleCurrentChange:function(t){this.currentPage=t,this.initdata({page:this.currentPage,limit:this.limit,title:this.searchinput})},onSubmit:function(t,e){var a,r=this;this.$refs[t].validate((a=o()(i.a.mark(function t(a,l){var o,n,s,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=19;break}if("添加"!==e){t.next=10;break}return r.form.op_name="op_name",t.next=5,r.$http.HallFunConfig.PostPaylist(r.form);case 5:o=t.sent,1===(n=o.data).code&&"ok"===n.msg&&r.initdata({page:r.currentPage,limit:r.limit,title:r.searchinput}),t.next=16;break;case 10:if("更新"!==e){t.next=16;break}return t.next=13,r.$http.HallFunConfig.PutPaylist(r.form);case 13:s=t.sent,1===(c=s.data).code&&"ok"===c.msg&&r.initdata({page:r.currentPage,limit:r.limit,title:r.searchinput});case 16:r.editForm("添加",!1,{}),t.next=21;break;case 19:return console.log("error submit!!"),t.abrupt("return",!1);case 21:case"end":return t.stop()}},t,r)})),function(t,e){return a.apply(this,arguments)}))},dialogFormVisible:function(){this.editForm("添加",!1,{})},add:function(t){this.editForm("添加",!0,{}),this.$refs[t].resetFields()},del:function(){var t=this;return o()(i.a.mark(function e(){var a,r,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0==t.selectList.length){e.next=9;break}return a=t.selectList.join(),e.next=4,t.$http.HallFunConfig.DeletePaylist({id_list:"("+a+")"});case 4:r=e.sent,1===(l=r.data).code&&"ok"===l.msg&&t.initdata({page:t.currentPage,limit:t.limit,title:t.searchinput}),e.next=10;break;case 9:t.$message("请选择需要删除的数据");case 10:case"end":return e.stop()}},e,t)}))()},search:function(){""===this.searchinput&&this.$message({type:"warning",message:"请输入你要搜索的支付名称!"}),this.currentPage=1,this.limit=10,this.initdata({page:this.currentPage,limit:this.limit,title:this.searchinput})},editForm:function(t,e,a){this.title=t,this.visible=e,this.form=a},formateData:function(t){var e=this;return Array.isArray(t)?t.forEach(function(t){e.formate(t)}):this.formate(t),t},timestampToTime:function(t){var e=new Date(1e3*t);return e.getFullYear()+"-"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-")+(e.getDate()+" ")+(e.getHours()+":")+(e.getMinutes()+":")+e.getSeconds()},formate:function(t){t.is_diy=0===t.is_diy?"固定":"可自定义",t.o_status=1===t.o_status?"不生效":"生效",t.o_activity=1===t.o_activity?"不推荐":"推荐",t.created_at=this.timestampToTime(t.created_at)},formateNum:function(t){if("number"!=typeof t.is_diy||"number"!=typeof t.o_status||"number"!=typeof t.o_activity||"number"!=typeof t.pay_way){switch(t.is_diy="固定金额"===t.is_diy?1:2,t.o_status="不生效"===t.o_status?1:2,t.o_activity="不推荐"===t.o_activity?1:2,t.pay_way){case"支付宝":t.pay_way=1;break;case"微信":t.pay_way=2;break;case"银联":t.pay_way=3;break;case"银行转账":t.pay_way=4;break;case"VIP充值":t.pay_way=5}return t}},initdata:function(t){var e=this;return o()(i.a.mark(function a(){var r,l,o,s,c;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http.HallFunConfig.GetPaylist(t);case 2:return r=a.sent,l=r.data,o=e.formateData(Object(n.a)(l.data)),e.tableData=o,e.total=l.total,console.log(l),a.next=10,e.$http.HallFunConfig.GetNameLiat({type_id:2});case 10:s=a.sent,console.log(s),c=s.data.data[0],console.log(c),[];case 15:case"end":return a.stop()}},a,e)}))()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"payList"}},[a("div",{staticClass:"title"},[a("div",{staticClass:"botton"},[a("el-button",{attrs:{type:"danger"},on:{click:t.del}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add("form")}}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("el-input",{staticClass:"el_input",staticStyle:{width:"200px"},attrs:{placeholder:"请输入支付名称"},model:{value:t.searchinput,callback:function(e){t.searchinput=e},expression:"searchinput"}})],1),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"","highlight-current-row":"","default-sort":{prop:"ID",order:t.orderlist[0]},data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"id",label:"ID",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort_id",label:"排序",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pay_name",label:"支付名称",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"pay_channel",label:"支付渠道",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"pay_way",label:"支付方式",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"money_list",label:"固定充值金额",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"is_diy",label:"充值类型",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"diy_max",label:"自定义最大金额",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"diy_min",label:"可自定义最小金额",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"pay_desc",label:"支付备注",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"o_status",label:"是否生效",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"o_activity",label:"是否推荐",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"op_name",label:"操作者",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"操作时间",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"change",label:"",align:"center","show-overflow-tooltip":"",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row,"form")}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.total>10?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),a("div",{staticClass:"form"},[a("el-dialog",{attrs:{title:t.title,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"显示排序",prop:"sort_num"}},[a("el-input",{attrs:{placeholder:"显示排序"},model:{value:t.form.sort_num,callback:function(e){t.$set(t.form,"sort_num",e)},expression:"form.sort_num"}}),t._v(" "),a("span",[t._v("排序只可以为数字")])],1),t._v(" "),a("el-form-item",{attrs:{label:"支付名称",prop:"pay_name"}},[a("el-input",{attrs:{placeholder:"支付名称"},model:{value:t.form.pay_name,callback:function(e){t.$set(t.form,"pay_name",e)},expression:"form.pay_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"支付渠道(小类)",prop:"pay_channel"}},[a("el-input",{attrs:{placeholder:"支付渠道名称"},model:{value:t.form.pay_channel,callback:function(e){t.$set(t.form,"pay_channel",e)},expression:"form.pay_channel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"支付方式(大类)",prop:"pay_way"}},[a("el-select",{model:{value:t.form.pay_way,callback:function(e){t.$set(t.form,"pay_way",e)},expression:"form.pay_way"}},[a("el-option",{attrs:{label:"支付宝",value:1}}),t._v(" "),a("el-option",{attrs:{label:"微信",value:2}}),t._v(" "),a("el-option",{attrs:{label:"银联",value:3}}),t._v(" "),a("el-option",{attrs:{label:"银行卡转账",value:4}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"自定义金额",prop:"is_diy"}},[a("el-radio-group",{model:{value:t.form.is_diy,callback:function(e){t.$set(t.form,"is_diy",e)},expression:"form.is_diy"}},[a("el-radio",{attrs:{label:1}},[t._v("固定金额")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("自定义金额")])],1)],1),t._v(" "),2===t.form.is_diy?a("p",[a("el-form-item",{attrs:{label:"最大自定义金额",prop:"diy_max"}},[a("el-input",{model:{value:t.form.diy_max,callback:function(e){t.$set(t.form,"diy_max",e)},expression:"form.diy_max"}}),t._v(" "),a("span",[t._v("金额只可以为数字")])],1),t._v(" "),a("el-form-item",{attrs:{label:"最小自定义金额",prop:"diy_min"}},[a("el-input",{model:{value:t.form.diy_min,callback:function(e){t.$set(t.form,"diy_min",e)},expression:"form.diy_min"}}),t._v(" "),a("span",[t._v("金额只可以为数字")])],1)],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"常用充值金额",prop:"money_num"}},[a("el-input",{attrs:{placeholder:"请输入充值金额"},model:{value:t.form.money_num,callback:function(e){t.$set(t.form,"money_num",e)},expression:"form.money_num"}}),t._v(" "),a("span",[t._v("金额只可以为数字")])],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"pay_desc"}},[a("el-input",{model:{value:t.form.pay_desc,callback:function(e){t.$set(t.form,"pay_desc",e)},expression:"form.pay_desc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否推荐",prop:"o_activity"}},[a("el-radio-group",{model:{value:t.form.o_activity,callback:function(e){t.$set(t.form,"o_activity",e)},expression:"form.o_activity"}},[a("el-radio",{attrs:{label:1}},[t._v("不推荐")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("推荐")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"是否生效",prop:"o_status"}},[a("el-radio-group",{model:{value:t.form.o_status,callback:function(e){t.$set(t.form,"o_status",e)},expression:"form.o_status"}},[a("el-radio",{attrs:{label:1}},[t._v("不生效")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("生效中")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form",t.title)}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.dialogFormVisible}},[t._v("返 回")])],1)],1)],1)])},staticRenderFns:[]};var u=a("C7Lr")(s,c,!1,function(t){a("gaYi")},"data-v-a4278132",null);e.default=u.exports}});
//# sourceMappingURL=19.276fd71226628e2d31f2.js.map