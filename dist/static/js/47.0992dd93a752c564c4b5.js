webpackJsonp([47],{GLR5:function(e,t){},"rU+Z":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("lC5x"),n=o.n(a),i=o("J0Oq"),l=o.n(i),r=o("fftp"),s=o("zhQY"),c=o("06fe"),m=o("22Zk"),u=(c.a,r.a,m.a,{name:"PayOrderRecord",components:{InfoTableItem:c.a,InfoTable:r.a,InputArea:m.a},data:function(){return{pagesize:5,currentPage:1,total:0,tableData:[],dialogFormVisible:!1,dialogVisible:!1,formLabelWidth:"160px",dialogTitle:"",tableStyle:[{label:"ID",prop:"id",width:""},{label:"兑换方式",prop:"method",width:""},{label:"当前状态",prop:"online_status",width:""},{label:"兑换最小额度(元)",prop:"min_money",width:""},{label:"兑换最大额度(元)",prop:"max_money",width:""},{label:"角标",prop:"thumb",width:""},{label:"操作",prop:"action",width:"200"}],records:[],pageInfo:new s.a(1,[5,10,15],0),form:{id:null,pay_type:"",exchange_min:"",exchange_max:"",status:""},form2:{keep_money:1e3},fileList:[]}},filters:{formatStatus:function(e){return 1===e?"下线":"上线"}},methods:{resetForm:function(){this.form={id:null,pay_type:"",exchange_min:"",exchange_max:"",status:""}},getExchangeList:function(){var e=this;return l()(n.a.mark(function t(){var o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("v1/backend/lobby/conversion",{params:{page:e.currentPage,limit:e.pagesize}});case 2:o=t.sent,console.log(o),1===o.data.code&&(e.records=o.data.data,e.total=o.data.total);case 5:case"end":return t.stop()}},t,e)}))()},addConfig:function(){var e=this;return l()(n.a.mark(function t(){var o,a,i,l;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form.id){t.next=10;break}return o={method:Number(e.form.pay_type),keep_money:e.form2.keep_money,min_money:Number(e.form.exchange_min),max_money:Number(e.form.exchange_max),online_status:Number(e.form.status),thumb:"thumb"},console.log(o),t.next=5,e.$http.post("v1/backend/lobby/conversion",o);case 5:1===(a=t.sent).data.code&&(e.dialogFormVisible=!1,e.getExchangeList()),console.log(a),t.next=16;break;case 10:return i={method:Number(e.form.pay_type),keep_money:e.form2.keep_money,min_money:Number(e.form.exchange_min),max_money:Number(e.form.exchange_max),online_status:Number(e.form.status),thumb:"thumb",id:e.form.id},t.next=13,e.$http({method:"put",url:"v1/backend/lobby/conversion",data:i});case 13:l=t.sent,console.log(l),1===l.data.code&&(e.dialogFormVisible=!1,e.getExchangeList());case 16:case"end":return t.stop()}},t,e)}))()},openAdd:function(){this.dialogFormVisible=!0,this.dialogTitle="添加配置信息",this.resetForm()},handleEdit:function(e){console.log(e),this.dialogFormVisible=!0,this.dialogTitle="编辑配置信息",this.form.id=e.id,this.form.pay_type=String(e.method),this.form.exchange_min=e.min_money,this.form.exchange_max=e.max_money,this.form.status=String(e.status)},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.delete("v1/backend/lobby/conversion",{params:{id:e.id}}).then(function(e){1===e.data.code&&(t.getExchangeList(),t.$message({type:"success",message:"删除成功!"}))})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},updateStatus:function(e){var t=this;this.$confirm("确认更新状态吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o={id:e.id,online_status:1===e.online_status?2:1};t.$http.patch("v1/backend/lobby/conversion",o).then(function(e){1===e.data.code&&t.getExchangeList()})})},setKeepMoney:function(){this.dialogVisible=!1,this.$message({type:"success",message:"设置成功"})},httpRequest:function(e){var t=e.file,o=-1!=t.type.indexOf("image"),a=t.size/1024/1024<2;o?a||this.$message.error("只能上传图片大小小于2M"):this.$message.error("只能上传图片格式png、jpg、gif!")},handleSizeChange:function(e){this.pagesize=e,this.getExchangeList()},handleCurrentChange:function(e){this.currentPage=e,this.getExchangeList()},handleSelectionChange:function(e){this.multipleSelection=e},open:function(){var e=this;this.$prompt("保留金额","设置保留金额",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!0,inputValue:this.keep_money,inputType:"number"}).then(function(t){t.value;e.$message({type:"success",message:"操作成功"})}).catch(function(){e.$message({type:"info",message:"取消输入"})})},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)}},mounted:function(){this.getExchangeList()}}),p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"ExchangeConf-main"}},[o("input-area",[o("el-button",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{type:"danger"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("删除")]),e._v(" "),o("el-button",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:e.openAdd}},[e._v("添加")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("保留金额设置")])],1),e._v(" "),o("div",{staticClass:"bd"},[o("info-table",{attrs:{"table-style":e.tableStyle,records:e.records,"page-info":e.pageInfo,"hide-page":!0}},[o("info-table-item",{attrs:{"table-style":e.tableStyle},scopedSlots:e._u([{key:"default",fn:function(t){return["method".indexOf(t.prop)>=0?[1===t.row[t.prop]?o("span",[e._v("支付宝")]):e._e(),e._v(" "),2===t.row[t.prop]?o("span",[e._v("银行卡")]):e._e()]:e._e(),e._v(" "),"online_status".indexOf(t.prop)>=0?[1===t.row[t.prop]?o("span",[e._v("上线")]):e._e(),e._v(" "),2===t.row[t.prop]?o("span",[e._v("下线")]):e._e()]:e._e(),e._v(" "),"action"===t.prop?[o("el-button",{staticStyle:{"background-color":"#30a99d",color:"#fff"},attrs:{size:"mini"},on:{click:function(o){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),o("el-button",{staticStyle:{"background-color":"#30a99d",color:"#fff"},attrs:{size:"mini"},on:{click:function(o){return e.updateStatus(t.row)}}},[e._v(e._s(e._f("formatStatus")(t.row.online_status)))])]:e._e(),e._v(" "),["action","method","online_status"].indexOf(t.prop)<0?[e._v(e._s(t.row[t.prop]))]:e._e()]}}])})],1),e._v(" "),o("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),o("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"支付方式","label-width":e.formLabelWidth}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.pay_type,callback:function(t){e.$set(e.form,"pay_type",t)},expression:"form.pay_type"}},[o("el-option",{attrs:{label:"支付宝",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"银行卡",value:"2"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"最小兑换金额","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.exchange_min,callback:function(t){e.$set(e.form,"exchange_min",t)},expression:"form.exchange_min"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"最大兑换金额","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.exchange_max,callback:function(t){e.$set(e.form,"exchange_max",t)},expression:"form.exchange_max"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth}},[o("el-select",{staticStyle:{width:"100%"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[o("el-option",{attrs:{label:"上线",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"下线",value:"2"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"角标","label-width":e.formLabelWidth}},[o("el-upload",{staticClass:"upload-demo",attrs:{limit:1,action:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"list-type":"picture","http-request":e.httpRequest}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),e._v(" "),o("div",[e._v(e._s(e.fileList))]),e._v(" "),o("div",[e._v(e._s(e.form))]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addConfig}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"设置保留金额",visible:e.dialogVisible,width:"20%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("el-form",{attrs:{model:e.form2}},[o("el-form-item",{attrs:{label:"保留金额","label-width":"100px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form2.keep_money,callback:function(t){e.$set(e.form2,"keep_money",e._n(t))},expression:"form2.keep_money"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.setKeepMoney}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=o("C7Lr")(u,p,!1,function(e){o("GLR5")},"data-v-5df04f6a",null);t.default=d.exports}});
//# sourceMappingURL=47.0992dd93a752c564c4b5.js.map