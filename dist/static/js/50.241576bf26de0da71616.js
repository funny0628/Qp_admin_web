webpackJsonp([50],{"8+/R":function(e,t){},cIpR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),o=a.n(i),r=a("exGp"),l=a.n(r),n=a("mvHQ"),s=a.n(n),m=a("iVUn"),f=a("fftp"),c=a("zhQY"),_=a("Z/hU"),d=a("2u00"),p=(a("y35B"),a("22Zk")),u=a("06fe"),b=(a("mw3O"),_.a,u.a,p.a,m.a,f.a,d.a,{name:"BroadcastConf",extends:_.a,components:{InfoTableItem:u.a,InputArea:p.a,SelectTime:m.a,InfoTable:f.a,PermissionButton:d.a},data:function(){return{formLabelWidth:"120px",dialogTitle:"",value:!0,labelPosition:"left",dialogFormVisible:!1,platforms:[{value:1,label:"平台1"},{value:2,label:"平台2"}],format:{platform:""},funOpts:[{value:"1",label:"留空"},{value:"2",label:"活动"},{value:"3",label:"邮件"},{value:"4",label:"排行榜"},{value:"5",label:"设置"},{value:"6",label:"保险箱"},{value:"7",label:"广播"},{value:"8",label:"财神"}],tableStyle:[{label:"ID",prop:"id",width:""},{label:"广播类型",prop:"type",width:""},{label:"游戏名称",prop:"game_name",width:""},{label:"信息",prop:"info",width:""},{label:"保留时间(秒)",prop:"exit_time",width:""},{label:"生成金币范围",prop:"coins_range",width:""},{label:"生成时间范围",prop:"time_range",width:""},{label:"触发金额",prop:"target_coins",width:""},{label:"操作",prop:"action",width:"150"}],records:[],pageInfo:new c.a(0,[5,10,15],5),dialogAddVisible:!1,form:{mid:"",type:"",game_name:"",info:"",exit_time:"",coins_range:["",""],time_range:["",""],target_coins:"",interval_time:"",is_need_fake:""}}},methods:{getBroadcastList:function(){var e=this;this.$http.get("lobby/play_broadcast",{params:{page:1,limit:10}}).then(function(t){console.log(t),1===t.data.code&&(e.records=t.data.data)})},addBroadcast:function(){var e=this;if(this.form.id){var t={id:this.form.id,mid:Number(this.form.mid),type:Number(this.form.type),game_name:this.form.game_name,info:this.form.info,exit_time:Number(this.form.exit_time),coins_range:s()(this.form.coins_range),time_range:s()(this.form.time_range),target_coins:this.form.target_coins,interval_time:this.form.interval_time,is_need_fake:this.form.is_need_fake};this.$http.put("lobby/play_broadcast",t).then(function(t){console.log(t),1===t.data.code&&(e.dialogFormVisible=!1,e.getBroadcastList(),e.$message({type:"success",message:t.data.msg}))})}else{var a={mid:Number(this.form.mid),type:Number(this.form.type),game_name:this.form.game_name,info:this.form.info,exit_time:Number(this.form.exit_time),coins_range:s()(this.form.coins_range),time_range:s()(this.form.time_range),target_coins:this.form.target_coins,interval_time:this.form.interval_time,is_need_fake:this.form.is_need_fake};this.$http.post("lobby/play_broadcast",a).then(function(t){console.log(t),1===t.data.code&&(e.dialogFormVisible=!1,e.getBroadcastList(),e.$message({type:"success",message:t.data.msg}))})}},resetForm:function(){this.form={mid:"",type:"",game_name:"",info:"",exit_time:"",coins_range:["",""],time_range:["",""],target_coins:"",interval_time:"",is_need_fake:""}},handleEdit:function(e){console.log(e),this.dialogTitle="编辑系统广播",this.dialogFormVisible=!0,this.form.id=e.id,this.form.mid=e.mid,this.form.type=String(e.type),this.form.game_name=e.game_name,this.form.info=e.info,this.form.exit_time=String(e.exit_time),this.form.coins_range[0]=JSON.parse(e.coins_range)[0],this.form.coins_range[1]=JSON.parse(e.coins_range)[1],this.form.time_range[0]=JSON.parse(e.time_range)[0],this.form.time_range[1]=JSON.parse(e.time_range)[1],this.form.target_coins=e.target_coins,this.form.interval_time=e.interval_time,this.form.is_need_fake=String(e.is_need_fake)},handleDelete:function(e){var t=this;console.log(e);var a=e.id;this.$confirm("此操作将删除该项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(o.a.mark(function e(){var i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.delete("lobby/play_broadcast",{params:{id:a}});case 2:i=e.sent,console.log(i),t.$message({type:"success",message:"删除成功!"});case 5:case"end":return e.stop()}},e,t)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})})},search:function(){var e=this.format;this.userList(e,1e3)},openAdd:function(){this.dialogTitle="添加系统广播",this.dialogFormVisible=!0,this.resetForm()},open:function(){var e=this;this.$confirm("确认发送吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$message({type:"success",message:"发送成功!"})}).catch(function(){e.$message({type:"info",message:"已取消发送"})})}},mounted:function(){this.getBroadcastList()}}),g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"BroadcastConf-main"}},[a("input-area",[a("div",[a("el-button",{attrs:{type:"danger"}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.openAdd}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.open}},[e._v("发送到服务端配置")])],1)]),e._v(" "),a("div",{staticClass:"bd"},[a("info-table",{attrs:{search:e.search,"table-style":e.tableStyle,records:e.records,"page-info":e.pageInfo}},[a("info-table-item",{attrs:{"table-style":e.tableStyle},scopedSlots:e._u([{key:"default",fn:function(t){return["type"===t.prop?[1===t.row[t.prop]?a("span",[e._v("对局广播")]):e._e(),e._v(" "),2===t.row[t.prop]?a("span",[e._v("vip上线广播")]):e._e(),e._v(" "),3===t.row[t.prop]?a("span",[e._v("引导弹窗广播")]):e._e()]:e._e(),e._v(" "),"action"===t.prop?[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]:e._e(),e._v(" "),["action","type"].indexOf(t.prop)<0?[e._v(e._s(t.row[t.prop]))]:e._e()]}}])})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"ID","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.mid,callback:function(t){e.$set(e.form,"mid",t)},expression:"form.mid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"对局广播",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"VIP上线广播",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"引导弹窗广播",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"游戏名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.game_name,callback:function(t){e.$set(e.form,"game_name",t)},expression:"form.game_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公告信息","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.info,callback:function(t){e.$set(e.form,"info",t)},expression:"form.info"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"广播保留时间","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.exit_time,callback:function(t){e.$set(e.form,"exit_time",t)},expression:"form.exit_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"金币范围","label-width":e.formLabelWidth}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.coins_range[0],callback:function(t){e.$set(e.form.coins_range,0,t)},expression:"form.coins_range[0]"}})],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.coins_range[1],callback:function(t){e.$set(e.form.coins_range,1,t)},expression:"form.coins_range[1]"}})],1)],1),e._v(" "),a("span",[e._v("生成的金币范围格式: 100,5000")])],1),e._v(" "),a("el-form-item",{attrs:{label:"时间范围","label-width":e.formLabelWidth}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.time_range[0],callback:function(t){e.$set(e.form.time_range,0,t)},expression:"form.time_range[0]"}})],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.time_range[1],callback:function(t){e.$set(e.form.time_range,1,t)},expression:"form.time_range[1]"}})],1)],1),e._v(" "),a("span",[e._v("生成的时间范围格式: 600,1200")])],1),e._v(" "),a("el-form-item",{attrs:{label:"触发金额","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.target_coins,callback:function(t){e.$set(e.form,"target_coins",t)},expression:"form.target_coins"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"时间间隔","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.interval_time,callback:function(t){e.$set(e.form,"interval_time",t)},expression:"form.interval_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否MOCK数据","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.is_need_fake,callback:function(t){e.$set(e.form,"is_need_fake",t)},expression:"form.is_need_fake"}},[a("el-option",{attrs:{label:"否",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"是",value:"1"}})],1)],1)],1),e._v(" "),a("div",[e._v(e._s(e.form))]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addBroadcast}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(b,g,!1,function(e){a("8+/R")},"data-v-56dfbecf",null);t.default=h.exports}});
//# sourceMappingURL=50.241576bf26de0da71616.js.map