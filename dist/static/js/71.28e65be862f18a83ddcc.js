webpackJsonp([71],{"A9/V":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("lC5x"),i=a.n(l),n=a("J0Oq"),o=a.n(n),s=a("a3Yh"),r=a.n(s),c=a("EuRQ"),u={data:function(){var t;return t={searchinput:"",orderlist:["ascending","descending"],tableData:[],total:0,fileList:[],rules:{},form:{act_name:"",type_id:1,status_id:"",act_info:"",start_time:"",end_time:"",auth:"root"},options:[{value:"选项1",label:"VIP"},{value:"选项2",label:"全民代理"},{value:"选项3",label:"客服"},{value:"选项4",label:"兑换"},{value:"选项5",label:"充值"},{value:"选项6",label:"活动"},{value:"选项7",label:"绑定手机"}],options2:[{value:"选项8",label:"左下"},{value:"选项9",label:"中下"},{value:"选项10",label:"右下"}],value:""},r()(t,"total",0),r()(t,"currentPage",1),r()(t,"limit",10),r()(t,"visible",!1),r()(t,"title","添加系统公告"),r()(t,"selectList",[]),r()(t,"loading",!1),t},created:function(){this.initdata({page:this.currentPage,limit:this.limit,title:this.searchinput})},methods:{del:function(){var t=this;0!=this.selectList.length?this.$confirm("确认删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(i.a.mark(function e(){var a,l,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.selectList.join(),e.next=3,t.$http.HallFunConfig.DeleteActivityList({id_list:"("+a+")"});case 3:l=e.sent,n=l.data,console.log(n),1===n.code&&"ok"===n.msg&&t.initdata({page:t.currentPage,limit:t.limit,title:t.searchinput}),t.$message({type:"success",message:"删除成功!"});case 8:case"end":return e.stop()}},e,t)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})}):this.$message("请选择需要删除的数据")},add:function(){this.editForm("添加活动",!0,{}),this.$refs.formName.resetFields()},send:function(){var t=this;this.$confirm("确认发送吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(o()(i.a.mark(function e(){var a,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$http.HallFunConfig.PostTableConfig({type_id:7});case 3:a=e.sent,1===(l=a.data).code&&l.data&&(t.loading=!1,t.$message({type:"success",message:l.msg}));case 6:case"end":return e.stop()}},e,t)})))},search:function(){""===this.searchinput&&this.$message({type:"warning",message:"请输入你要搜索的活动名称!"}),this.currentPage=1,this.limit=10,this.initdata({page:this.currentPage,limit:this.limit,title:this.searchinput})},handleSelectionChange:function(t){var e=t.map(function(t){return t.id});this.selectList=e},handleSizeChange:function(t){this.currentPage=1,this.limit=t,this.initdata({page:this.currentPage,limit:this.limit,title:this.searchinput})},handleCurrentChange:function(t){this.currentPage=t,this.initdata({page:this.currentPage,limit:this.limit,title:this.searchinput})},handlePreview:function(){},handleRemove:function(){},onSuccess:function(t,e,a){console.log(t,e,a)},handleEdit:function(t,e){this.editForm("更新活动",!0,{}),this.$refs.formName.resetFields()},handleDelete:function(t,e){var a=this;console.log(t,e.id),this.$confirm("确认删除吗?","信息",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(o()(i.a.mark(function t(){var l,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$http.HallFunConfig.DeleteActivityList({id:e.id});case 2:l=t.sent,1===(n=l.data).code&&"ok"===n.msg&&a.initdata({page:a.currentPage,limit:a.limit,title:a.searchinput}),console.log(n),a.$message({type:"success",message:"删除成功!"});case 7:case"end":return t.stop()}},t,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})})},onSubmit:function(){var t,e=this;this.$refs.form.validate((t=o()(i.a.mark(function t(a){var l,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}return console.log(e.form),t.next=4,e.$http.HallFunConfig.PostActivityList(e.form);case 4:l=t.sent,n=l.data,console.log(n),e.editForm("添加活动",!1,{}),t.next=12;break;case 10:return console.log("error submit!!"),t.abrupt("return",!1);case 12:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},back:function(){this.editForm("添加活动",!1,{})},editForm:function(t,e,a){this.title=t,this.visible=e,this.form=a},formateData:function(t){return t.forEach(function(t){switch(t.act_status=1===t.act_status?"待上线":"生效中",t.act_type){case 1:t.act_type="普通";break;case 2:t.act_type="跳转";break;case 3:t.act_type="跳转网页";break;case 4:t.act_type="任务";break;case 5:t.act_type="首充活动";break;case 6:t.act_type="排行榜活动";break;case 7:t.act_type="绑定手机活动"}}),t},initdata:function(t){var e=this;return o()(i.a.mark(function a(){var l,n,o;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$http.HallFunConfig.GetActivityList(t);case 2:l=a.sent,n=l.data,o=e.formateData(Object(c.a)(n.data)),e.tableData=o,e.total=n.total;case 7:case"end":return a.stop()}},a,e)}))()}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"activityList","element-loading-text":"正在上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.6)"}},[a("div",{staticClass:"title"},[a("div",{staticClass:"botton"},[a("el-button",{attrs:{type:"danger"},on:{click:t.del}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add(t.form)}}},[t._v("添加")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.send}},[t._v("发送到服务器配置")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),a("el-input",{staticStyle:{"margin-top":"10px",width:"200px"},attrs:{placeholder:"请输入活动名称"},model:{value:t.searchinput,callback:function(e){t.searchinput=e},expression:"searchinput"}})],1),t._v(" "),a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"","highlight-current-row":"","default-sort":{prop:"ID",order:t.orderlist[0]},data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"id",label:"ID",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"act_name",label:"活动名称",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"act_type",label:"活动类型",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"act_status",label:"活动状态",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"start_time",label:"活动开始时间",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"end_time",label:"活结束时间",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"auth",label:"操作者",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"操作时间",align:"center","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"change",label:"",align:"center","show-overflow-tooltip":"",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.row,t.form)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.total>5?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1),t._v(" "),a("div",{staticClass:"dialog"},[a("el-dialog",{attrs:{title:t.title,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"活动类型",prop:"type_id"}},[a("el-select",{model:{value:t.form.type_id,callback:function(e){t.$set(t.form,"type_id",e)},expression:"form.type_id"}},[a("el-option",{attrs:{label:"普通",value:1}}),t._v(" "),a("el-option",{attrs:{label:"跳转",value:2}}),t._v(" "),a("el-option",{attrs:{label:"跳转网页",value:3}}),t._v(" "),a("el-option",{attrs:{label:"任务",value:4}}),t._v(" "),a("el-option",{attrs:{label:"首充活动",value:5}}),t._v(" "),a("el-option",{attrs:{label:"排行榜活动",value:6}}),t._v(" "),a("el-option",{attrs:{label:"绑定手机活动",value:7}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"活动名称",prop:"act_name"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"活动名称"},model:{value:t.form.act_name,callback:function(e){t.$set(t.form,"act_name",e)},expression:"form.act_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"活动状态",prop:"status_id"}},[a("el-select",{model:{value:t.form.status_id,callback:function(e){t.$set(t.form,"status_id",e)},expression:"form.status_id"}},[a("el-option",{attrs:{label:"待上线",value:1}}),t._v(" "),a("el-option",{attrs:{label:"生效中",value:2}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"活动时间",prop:"start_time"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请输入开始时间",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:t.form.start_time,callback:function(e){t.$set(t.form,"start_time",e)},expression:"form.start_time"}}),t._v("\n          -\n          "),a("el-date-picker",{attrs:{type:"date",placeholder:"请输入结束时间",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:t.form.end_time,callback:function(e){t.$set(t.form,"end_time",e)},expression:"form.end_time"}})],1),t._v(" "),a("h2",[t._v("普通-(额外配置)")]),t._v(" "),1===t.form.type_id?a("el-form-item",{attrs:{label:"背景图片",prop:"act_info"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.onSuccess,"file-list":t.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n              只能上传jpg/png文件，且不超过500kb\n            ")])],1)],1):t._e(),t._v(" "),2===t.form.type_id?a("div",[a("p",[t._v("\n            跳转地址:\n            "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v("\n            按钮位置:\n            "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options2,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("p",[t._v("\n            活动图片:"),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n                只能上传jpg/png文件，且不超过500kb\n              ")])],1)],1),t._v(" "),a("p",[t._v("\n            按钮图片:\n            "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n                只能上传jpg/png文件，且不超过500kb\n              ")])],1)],1)]):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit(t.form)}}},[t._v("保 存")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.back()}}},[t._v("返 回")])],1)],1)],1)])},staticRenderFns:[]};var d=a("C7Lr")(u,p,!1,function(t){a("ZOsU")},"data-v-30b4311e",null);e.default=d.exports},ZOsU:function(t,e){}});
//# sourceMappingURL=71.28e65be862f18a83ddcc.js.map