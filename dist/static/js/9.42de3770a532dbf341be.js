webpackJsonp([9],{"U2+I":function(e,t){},dsVN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("22Zk"),o=(i.a,{name:"device_blacklist",components:{InputArea:i.a},data:function(){return{disabled:!1,device_id:"",currentPage:1,pagesize:10,total:0,dialogTitle:"",formLabelWidth:"120px",dialogFormVisible:!1,dialogVisible:!1,tableData:[],form:{forbid_device:"",type:"1",remark:""},fileList:[],imageUrl:""}},filters:{formatStatus:function(e){return 1===e?"解禁":"封号"}},methods:{resetForm:function(){this.form={forbid_device:"",type:"1",remark:""}},getDeviceBlackList:function(){var e=this;this.$http.get("v1/backend/sys-conf/device-blacklist",{params:{page:this.currentPage,limit:this.pageSize}}).then(function(t){console.log(t),200===t.data.code&&(e.tableData=t.data.data,e.total=t.data.total)})},searchData:function(){var e=this;this.$http.get("v1/backend/sys-conf/device-blacklist",{params:{page:this.currentPage,limit:this.pageSize,device_id:this.device_id}}).then(function(t){console.log(t),200===t.data.code&&(e.tableData=t.data.data,e.total=t.data.total)})},openAddDialog:function(){this.resetForm(),this.disabled=!1,this.dialogTitle="添加控制名单",this.dialogFormVisible=!0},addDeviceBlack:function(){var e=this;if(this.form.id){var t={id:this.form.id,ip:this.form.forbid_device,op_type:Number(this.form.type),remarks:this.form.remark};this.$http.post("v1/backend/sys-conf/device-blacklist",t).then(function(t){console.log(t),200===t.data.code&&(e.dialogFormVisible=!1,e.getDeviceBlackList(),e.$message({type:"success",message:t.data.msg}))})}else{var a={ip:this.form.forbid_device,op_type:Number(this.form.type),remarks:this.form.remark};this.$http.post("v1/backend/sys-conf/device-blacklist",a).then(function(t){console.log(t),200===t.data.code&&(e.dialogFormVisible=!1,e.getDeviceBlackList(),e.$message({type:"success",message:t.data.msg}))})}},handleEdit:function(e){console.log(e),this.dialogTitle="编辑",this.dialogFormVisible=!0,this.form.id=e.id,this.form.forbid_device=e.lock_data,this.form.type=String(e.lock_status),this.form.remark=e.memo},change:function(){this.form.id&&(this.disabled=!0)},updateStatus:function(e){var t=this;console.log(e);var a={id:e.id,lock_status:0===e.lock_status?1:0};this.$http.put("v1/backend/sys-conf/device-blacklist",a).then(function(e){console.log(e),200===e.data.code&&(t.getDeviceBlackList(),t.$message({type:"success",message:e.data.msg}))})},handleSizeChange:function(e){this.pageSize=e,this.getDeviceBlackList()},handleCurrentChange:function(e){this.currentPage=e,this.getDeviceBlackList()}},mounted:function(){this.getDeviceBlackList()}}),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"deviceBlackList-main"}},[a("input-area",[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"add_device_blacklist",expression:"'add_device_blacklist'"}],staticStyle:{"background-color":"#30a99d",color:"#fff"},attrs:{type:"primary",size:"medium"},on:{click:e.openAddDialog}},[e._v("添加")]),e._v(" "),a("div",[a("span",[e._v("设备号")]),e._v(" "),a("el-input",{staticStyle:{width:"20%","margin-top":"10px"},attrs:{placeholder:"请输入设备号"},model:{value:e.device_id,callback:function(t){e.device_id=t},expression:"device_id"}}),e._v(" "),a("el-button",{staticStyle:{"background-color":"#30a99d",color:"#fff"},attrs:{type:"primary",size:"medium"},on:{click:e.searchData}},[e._v("查找")])],1)],1),e._v(" "),a("div",{staticClass:"bd"},[a("el-table",{directives:[{name:"has",rawName:"v-has",value:"device_blacklist_records",expression:"'device_blacklist_records'"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lock_data",label:"禁止",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lock_status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.lock_status?a("span",[e._v("封号")]):e._e(),e._v(" "),0===t.row.lock_status?a("span",[e._v("解禁")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"memo",label:"备注",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"op_name",label:"最后修改的操作人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"op_time",label:"操作时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("dateFormat")(t.row.op_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.lock_status?a("el-button",{directives:[{name:"has",rawName:"v-has",value:"forbidden_device_blacklist",expression:"'forbidden_device_blacklist'"}],staticStyle:{"background-color":"#30a99d",color:"#fff"},attrs:{size:"mini"},on:{click:function(a){return e.updateStatus(t.row)}}},[e._v(e._s(e._f("formatStatus")(t.row.lock_status)))]):e._e(),e._v(" "),0===t.row.lock_status?a("el-button",{directives:[{name:"has",rawName:"v-has",value:"unforbidden_device_blacklist",expression:"'unforbidden_device_blacklist'"}],staticStyle:{"background-color":"#fc7658",color:"#fff"},attrs:{size:"mini"},on:{click:function(a){return e.updateStatus(t.row)}}},[e._v(e._s(e._f("formatStatus")(t.row.lock_status)))]):e._e(),e._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"modify_device_blacklist",expression:"'modify_device_blacklist'"}],staticStyle:{"background-color":"#30a99d",color:"#fff"},attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.row),e.change()}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"被禁设备","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.form.forbid_device,callback:function(t){e.$set(e.form,"forbid_device",t)},expression:"form.forbid_device"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[a("el-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"封号",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addDeviceBlack}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(o,l,!1,function(e){a("U2+I")},"data-v-ca2a6f76",null);t.default=s.exports}});
//# sourceMappingURL=9.42de3770a532dbf341be.js.map