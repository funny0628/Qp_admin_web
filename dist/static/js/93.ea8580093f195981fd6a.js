webpackJsonp([93],{"9Fu8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("ZLEe"),i=a.n(r),n=a("lC5x"),l=a.n(n),s=a("J0Oq"),o=a.n(s),c=a("EuRQ"),u={name:"agent_config",data:function(){return{searchConfig:"",title:"新增",visible:!1,total:"",currentPage:1,limit:10,form:{lvl:"",min:"",max:"",rebate:""},rules:{lvl:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],min:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],max:[{required:!0,message:"必填项不可以为空",trigger:"blur"}],rebate:[{required:!0,message:"必填项不可以为空",trigger:"blur"}]},tableData:[]}},created:function(){this.initdata({page:this.currentPage,limit:this.limit})},methods:{add:function(){this.editForm("新增",!0,{})},handleEdit:function(e){this.editForm("编辑",!0,Object(c.a)(e))},handleDelete:function(e,t){var a=this;this.$confirm("确认删除吗？","信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(l.a.mark(function e(){var r,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$http.allAgency.DeleteAllAgency({id:t.id});case 2:r=e.sent,1===(i=r.data).code&&"ok"===i.msg&&a.initdata({page:a.currentPage,limit:a.limit}),a.$message({type:"success",message:"删除成功!"});case 6:case"end":return e.stop()}},e,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.limit=e,this.currentPage=1,this.initdata({page:this.currentPage,limit:this.limit})},handleCurrentChange:function(e){this.currentPage=e,this.initdata({page:this.currentPage,limit:this.limit})},onSubmit:function(e,t){var a,r=this;this.$refs[e].validate((a=o()(l.a.mark(function e(a){var n,s,o,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=26;break}if(i()(r.form).forEach(function(e){r.form[e]=+r.form[e]}),!(r.form.min>r.form.max)){e.next=5;break}return r.$message({type:"info",message:"流水区间下限不可以超过流水区间上限!!"}),e.abrupt("return",!1);case 5:if(!(r.form.rebate<250)){e.next=23;break}if("新增"!==t){e.next=14;break}return e.next=9,r.$http.allAgency.PostAllAgency(r.form);case 9:n=e.sent,1===(s=n.data).code&&"ok"===s.msg?(r.initdata({page:r.currentPage,limit:r.limit}),r.$message({type:"success",message:"添加成功!!"})):r.$message({type:"warning",message:"添加失败!!"}),e.next=20;break;case 14:if("编辑"!==t){e.next=20;break}return e.next=17,r.$http.allAgency.PutAllAgency(r.form);case 17:o=e.sent,1===(c=o.data).code&&"ok"===c.msg?(r.initdata({page:r.currentPage,limit:r.limit}),r.$message({type:"success",message:"编辑成功!!"})):r.$message({type:"warning",message:"编辑失败!!"});case 20:r.editForm("新增",!1,{}),e.next=24;break;case 23:r.$message({type:"info",message:"每万返佣额度输入最大值不超过250"});case 24:e.next=28;break;case 26:return console.log("error submit!!"),e.abrupt("return",!1);case 28:case"end":return e.stop()}},e,r)})),function(e){return a.apply(this,arguments)}))},editForm:function(e,t,a){this.title=e,this.visible=t,this.form=a},initdata:function(e){var t=this;return o()(l.a.mark(function a(){var r,i;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.allAgency.GetAllAgency(e);case 2:r=a.sent,i=r.data,t.tableData=Object(c.a)(i.data),t.total=i.total;case 6:case"end":return a.stop()}},a,t)}))()}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"AgencyConfig"}},[e._m(0),e._v(" "),a("div",{staticClass:"search"},[a("h3",[e._v("统一配置")]),e._v(" "),a("p",[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")])],1)]),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"","highlight-current-row":"",data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"lvl",label:"代理级别",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"min",label:"流水区间下限",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"max",label:"流水区间上限",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"rebate",label:"每万返佣额度",align:"center","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","show-overflow-tooltip":"",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.total>5?a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),a("div",{staticClass:"dialog"},[a("el-dialog",{attrs:{title:e.title,visible:e.visible,"destroy-on-close":!0},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"代理级别：",prop:"lvl"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"代理级别"},model:{value:e.form.lvl,callback:function(t){e.$set(e.form,"lvl",t)},expression:"form.lvl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"流水区间下限：",prop:"min"}},[a("p",[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"流水区间下限"},model:{value:e.form.min,callback:function(t){e.$set(e.form,"min",t)},expression:"form.min"}}),e._v("元\n          ")],1)]),e._v(" "),a("el-form-item",{attrs:{label:"流水区间上限：",prop:"max"}},[a("p",[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"流水区间上限"},model:{value:e.form.max,callback:function(t){e.$set(e.form,"max",t)},expression:"form.max"}}),e._v("元\n          ")],1)]),e._v(" "),a("el-form-item",{attrs:{label:"每万返佣额度：",prop:"rebate"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"每万返佣额度"},model:{value:e.form.rebate,callback:function(t){e.$set(e.form,"rebate",t)},expression:"form.rebate"}}),e._v(" "),a("p",[e._v("(元）注：每万返佣额度输入最大值不超过250。")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form",e.title)}}},[e._v("确 定")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("div",{staticClass:"Config"},[this._v("全民代理配置")])])}]};var f=a("C7Lr")(u,m,!1,function(e){a("M4S/")},"data-v-0f464386",null);t.default=f.exports},"M4S/":function(e,t){}});