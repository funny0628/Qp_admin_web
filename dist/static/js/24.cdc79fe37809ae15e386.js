webpackJsonp([24],{Zzy8:function(e,t){},wqZ8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),o=a.n(n),i=a("exGp"),l=a.n(i),s=a("22Zk"),r=(s.a,{name:"userList",components:{InputArea:s.a},data:function(){return{currentPage:1,pagesize:5,total:0,dialogAddRole:!1,dialogTitle:"",formLabelWidth:"120px",roleId:-1,form:{role_id:-1,name:"",display_name:""},form2:{role:""},dialogRoleAssign:!1,dialogRightAssign:!1,tableData:[],multipleSelection:[],rightData:[],defaultProps:{children:"children",label:"display_name"}}},methods:{getRoleList:function(){var e=this;return l()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("auth/roles",{params:{page:e.currentPage,limit:e.pagesize}});case 2:a=t.sent,console.log(a),200===a.data.code?(e.tableData=a.data.data,e.total=a.data.data.total,e.$message({type:"success",message:a.data.msg})):e.$message({type:"info",message:a.data.msg});case 5:case"end":return t.stop()}},t,e)}))()},getRigthList:function(){var e=this;return l()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("auth/permissions");case 2:a=t.sent,console.log(a);case 4:case"end":return t.stop()}},t,e)}))()},addRoleFn:function(){var e=this;return l()(o.a.mark(function t(){var a,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form.role_id){t.next=7;break}return t.next=3,e.$http.post("auth/roles",{name:e.form.name,display_name:e.form.display_name});case 3:200===(a=t.sent).data.code?(e.dialogAddRole=!1,e.getRoleList(),e.$message({type:"success",message:a.data.msg})):e.$message({type:"info",message:a.data.msg}),t.next=13;break;case 7:return console.log(e.form),t.next=10,e.$http.put("auth/roles",{name:e.form.name,display_name:e.form.display_name,role_id:e.form.role_id});case 10:n=t.sent,console.log(n),200===n.data.code?(e.dialogAddRole=!1,e.getRoleList(),e.$message({type:"success",message:n.data.msg})):e.$message({type:"info",message:n.data.msg});case 13:case"end":return t.stop()}},t,e)}))()},handleSelectionChange:function(e){this.multipleSelection=e,console.log(this.multipleSelection)},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pagesize=e,this.getRoleList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.getRoleList()},addRole:function(){this.dialogAddRole=!0,this.dialogTitle="添加角色",this.form={name:"",diaplay_name:""}},handleEdit:function(e,t){console.log(e,t),this.dialogAddRole=!0,this.dialogTitle="编辑角色",this.form.name=t.name,this.form.display_name=t.display_name,this.form.role_id=t.id},handleRole:function(e,t){this.dialogRoleAssign=!0},handleRight:function(e,t){var a=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.dialogRightAssign=!0,a.roleId=t.id,e.next=4,a.$http.get("auth/permissions");case 4:n=e.sent,console.log(n),200===n.data.code&&(a.rightData=n.data.data);case 7:case"end":return e.stop()}},e,a)}))()},handleDelete:function(e,t){var a=this;this.form.role_id=t.id,console.log(this.form.role_id),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$http.delete("auth/roles",{params:{role_id:a.form.role_id}});case 2:200===e.sent.data.code&&(a.$message({type:"success",message:"删除成功!"}),a.getRoleList());case 4:case"end":return e.stop()}},e,a)}))).catch(function(){a.$message({type:"info",message:"已取消删除"})})}},mounted:function(){this.getRoleList(),this.getRigthList()}}),d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"userList—main"}},[a("input-area",[a("el-button",{attrs:{type:"danger"}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("添加")])],1),e._v(" "),a("div",{staticClass:"bd"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"display_name",label:"显示名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(1e3*t.row.create_time)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"更新时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("dateFormat")(1e3*t.row.update_time)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleRight(t.$index,t.row)}}},[e._v("权限")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogAddRole,width:"30%"},on:{"update:visible":function(t){e.dialogAddRole=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.display_name,callback:function(t){e.$set(e.form,"display_name",t)},expression:"form.display_name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAddRole=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addRoleFn}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"权限分配",visible:e.dialogRightAssign,width:"30%"},on:{"update:visible":function(t){e.dialogRightAssign=t}}},[a("div",[a("el-tree",{attrs:{"default-expand-all":"",data:e.rightData,"show-checkbox":"","check-strictly":"","node-key":"id","default-checked-keys":[5],props:e.defaultProps}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogRightAssign=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogRightAssign=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(r,d,!1,function(e){a("Zzy8")},"data-v-ae98c824",null);t.default=c.exports}});
//# sourceMappingURL=24.cdc79fe37809ae15e386.js.map