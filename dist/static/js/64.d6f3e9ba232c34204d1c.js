webpackJsonp([64],{CQEX:function(t,e){},"x/dN":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("3cXf"),a=o.n(i),r=o("lC5x"),n=o.n(r),s=o("J0Oq"),l=o.n(s),c=o("fftp"),p=(o("zhQY"),o("06fe")),f=o("22Zk"),v=(p.a,c.a,f.a,{name:"vip_robot_config",components:{InfoTableItem:p.a,InfoTable:c.a,InputArea:f.a},data:function(){return{pagesize:10,currentPage:1,total:0,tableData:[],dialogFormVisible:!1,dialogVisible:!1,formLabelWidth:"120px",form:{min_coins:"",max_coins:"",vip_0:"",vip_1:"",vip_2:"",vip_3:"",vip_4:"",vip_5:"",vip_6:""},dialogTitle:"",rankRobotProbList:{},id:0,keys:""}},created:function(){var t=this;return l()(n.a.mark(function e(){var o,i,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("v1/backend/lobby/server_config/robot_rank_vip",{params:{key:"robot_rank_vip.lua"}});case 2:o=e.sent,i=o.data,console.log(i),t.id=i.data[0].id,t.keys=i.data[0].sys_key,a=JSON.parse(i.data[0].sys_val),console.log(a),t.rankRobotProbList=a;case 10:case"end":return e.stop()}},e,t)}))()},filters:{formatRate:function(t){var e="";for(var o in t)e+=o+"="+t[o]+",";return e}},methods:{sendDataToServer:function(){var t=this;this.$http.post("v1/backend/lobby/server_config_two",{type_id:3}).then(function(e){console.log(e),1===e.data.code&&t.$message({type:"success",message:e.data.msg})})},resetForm:function(){this.form={min_coins:"",max_coins:"",vip_0:"",vip_1:"",vip_2:"",vip_3:"",vip_4:"",vip_5:"",vip_6:""}},getRobotConfList:function(){var t=this;this.$http.get("v1/backend/lobby/robot",{params:{page:this.currentPage,limit:this.pagesize}}).then(function(e){console.log(e),t.tableData=e.data.data,t.total=e.data.total})},openAddDialog:function(){this.dialogFormVisible=!0,this.dialogTitle="添加信息",this.resetForm()},openRankDialog:function(){this.dialogVisible=!0,this.get()},addNewRobotConf:function(){var t=this;if(this.form.robot_id){var e={vip_0:this.form.vip_0,vip_1:this.form.vip_1,vip_2:this.form.vip_2,vip_3:this.form.vip_3,vip_4:this.form.vip_4,vip_5:this.form.vip_5,vip_6:this.form.vip_6},o={min_coins:Number(this.form.min_coins),max_coins:Number(this.form.max_coins),vip_rate:a()(e),robot_id:this.form.robot_id};this.$http.put("v1/backend/lobby/robot",o).then(function(e){console.log(e),1===e.data.code&&(t.dialogFormVisible=!1,t.getRobotConfList())})}else{var i={vip_0:this.form.vip_0,vip_1:this.form.vip_1,vip_2:this.form.vip_2,vip_3:this.form.vip_3,vip_4:this.form.vip_4,vip_5:this.form.vip_5,vip_6:this.form.vip_6},r={min_coins:Number(this.form.min_coins),max_coins:Number(this.form.max_coins),vip_rate:a()(i)};this.$http.post("v1/backend/lobby/robot",r).then(function(e){console.log(e),1===e.data.code&&(t.dialogFormVisible=!1,t.getRobotConfList())})}},handleEdit:function(t){console.log(t),this.dialogTitle="更新信息",this.dialogFormVisible=!0,this.form.robot_id=t.id,this.form.min_coins=t.min_coins,this.form.max_coins=t.max_coins,this.form.vip_0=JSON.parse(t.vip_rate).vip_0,this.form.vip_1=JSON.parse(t.vip_rate).vip_1,this.form.vip_2=JSON.parse(t.vip_rate).vip_2,this.form.vip_3=JSON.parse(t.vip_rate).vip_3,this.form.vip_4=JSON.parse(t.vip_rate).vip_4,this.form.vip_5=JSON.parse(t.vip_rate).vip_5,this.form.vip_6=JSON.parse(t.vip_rate).vip_6},handleDelete:function(t){var e=this;console.log(t),this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.delete("v1/backend/lobby/robot",{params:{robot_id:t.id}}).then(function(t){console.log(t),1===t.data.code&&e.getRobotConfList()}),e.$message({type:"success",message:"删除成功!"})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},send:function(){var t=this;return l()(n.a.mark(function e(){var o,i,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,o={keys:t.keys,values:a()(t.rankRobotProbList),id:t.id},e.next=4,t.$http.post("/v1/backend/lobby/server_config/robot_rank_vip",o);case 4:i=e.sent,r=i.data,console.log(r),1===r.code&&"ok"===r.msg&&(t.loading=!1,t.$message({type:"success",message:"发送服务器配置成功!"}));case 8:case"end":return e.stop()}},e,t)}))()},get:function(){var t=this;return l()(n.a.mark(function e(){var o,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("v1/backend/lobby/server_config/robot_rank_vip",{params:{key:"robot_rank_vip.lua"}});case 2:o=e.sent,i=o.data,console.log(i);case 5:case"end":return e.stop()}},e,t)}))()},save:function(){var t=this;return l()(n.a.mark(function e(){var o,i,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={keys:t.keys,values:a()(t.rankRobotProbList),id:t.id},e.next=3,t.$http.put("v1/backend/lobby/server_config/robot_rank_vip",o);case 3:i=e.sent,1===(r=i.data).code&&"ok"===r.msg&&(t.dialogVisible=!1,t.$message({type:"success",message:"保存成功!"}));case 6:case"end":return e.stop()}},e,t)}))()},handleSizeChange:function(t){this.pagesize=t,this.getRobotConfList()},handleCurrentChange:function(t){this.currentPage=t,this.getRobotConfList()},handleSelectionChange:function(t){this.multipleSelection=t},open:function(){var t=this;this.$confirm("确认发送吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"发送成功!"})}).catch(function(){t.$message({type:"info",message:"已取消发送"})})},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)}},mounted:function(){this.getRobotConfList()}}),_={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"VipClassConf-main"}},[o("input-area",[o("el-button",{directives:[{name:"has",rawName:"v-has",value:"add_vip_robot_config",expression:"'add_vip_robot_config'"}],staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.openAddDialog}},[t._v("添加")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.sendDataToServer}},[t._v("发送到服务端配置")])],1),t._v(" "),o("div",{staticClass:"bd"},[o("el-table",{directives:[{name:"has",rawName:"v-has",value:"vip_robot_config_records",expression:"'vip_robot_config_records'"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"机器人携带金币",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s([e.row.min_coins,e.row.max_coins]))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"vip_rate",label:"VIP级别+概率",align:"center",width:"450"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatRate")(JSON.parse(e.row.vip_rate))))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"create_time",label:"创建时间",align:"center",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"update_time",label:"更新时间",align:"center",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"action",label:"操作",fixed:"right",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{directives:[{name:"has",rawName:"v-has",value:"modify_vip_robot_config",expression:"'modify_vip_robot_config'"}],attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.handleEdit(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{directives:[{name:"has",rawName:"v-has",value:"delete_vip_robot_config",expression:"'delete_vip_robot_config'"}],attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),o("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"携带金币","label-width":t.formLabelWidth}},[o("el-row",[o("el-col",{attrs:{span:10}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.min_coins,callback:function(e){t.$set(t.form,"min_coins",e)},expression:"form.min_coins"}})],1),t._v(" "),o("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[t._v("-")]),t._v(" "),o("el-col",{attrs:{span:10}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.max_coins,callback:function(e){t.$set(t.form,"max_coins",e)},expression:"form.max_coins"}})],1)],1),t._v(" "),o("span",[t._v("机器人携带金币(左闭右开)")])],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_0","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.vip_0,callback:function(e){t.$set(t.form,"vip_0",e)},expression:"form.vip_0"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_1","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.vip_1,callback:function(e){t.$set(t.form,"vip_1",e)},expression:"form.vip_1"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_2","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.vip_2,callback:function(e){t.$set(t.form,"vip_2",e)},expression:"form.vip_2"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_3","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.vip_3,callback:function(e){t.$set(t.form,"vip_3",e)},expression:"form.vip_3"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_4","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.vip_4,callback:function(e){t.$set(t.form,"vip_4",e)},expression:"form.vip_4"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_5","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.vip_5,callback:function(e){t.$set(t.form,"vip_5",e)},expression:"form.vip_5"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_6","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.vip_6,callback:function(e){t.$set(t.form,"vip_6",e)},expression:"form.vip_6"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.addNewRobotConf}},[t._v("确 定")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"排行榜机器人随机概率",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("div",{staticStyle:{"margin-bottom":"20px","font-size":"16px"}},[o("span",[t._v("排行榜机器人随机概率")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.send}},[t._v("发送到服务端配置")])],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_0","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.rankRobotProbList.vip_0,callback:function(e){t.$set(t.rankRobotProbList,"vip_0",e)},expression:"rankRobotProbList.vip_0"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_1","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.rankRobotProbList.vip_1,callback:function(e){t.$set(t.rankRobotProbList,"vip_1",e)},expression:"rankRobotProbList.vip_1"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_2","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.rankRobotProbList.vip_2,callback:function(e){t.$set(t.rankRobotProbList,"vip_2",e)},expression:"rankRobotProbList.vip_2"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_3","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.rankRobotProbList.vip_3,callback:function(e){t.$set(t.rankRobotProbList,"vip_3",e)},expression:"rankRobotProbList.vip_3"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_4","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.rankRobotProbList.vip_4,callback:function(e){t.$set(t.rankRobotProbList,"vip_4",e)},expression:"rankRobotProbList.vip_4"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_5","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.rankRobotProbList.vip_5,callback:function(e){t.$set(t.rankRobotProbList,"vip_5",e)},expression:"rankRobotProbList.vip_5"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"VIP_6","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.rankRobotProbList.vip_6,callback:function(e){t.$set(t.rankRobotProbList,"vip_6",e)},expression:"rankRobotProbList.vip_6"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m=o("C7Lr")(v,_,!1,function(t){o("CQEX")},"data-v-3a42cec2",null);e.default=m.exports}});