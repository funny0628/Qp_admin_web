{"version":3,"sources":["webpack:///./src/pages/User/roleMan.vue","webpack:///./src/pages/User/roleMan.vue?1026","webpack:///./src/pages/User/roleMan.vue?85d7"],"names":["User_roleMan","InputArea","name","components","data","currentPage","pagesize","total","dialogAddRole","dialogTitle","formLabelWidth","roleId","form","role_id","display_name","form2","role","dialogRoleAssign","dialogRightAssign","tableData","multipleSelection","rightData","defaultProps","children","label","checkedKeys","currentRole","methods","getRoleList","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","wrap","_context","prev","next","$http","get","params","page","limit","sent","console","log","code","$message","type","message","msg","stop","getRigthList","_this2","_callee2","_context2","addRoleFn","_this3","_callee3","_res","_context3","post","put","handleRights","_this4","_callee4","nodes","arr","_context4","$refs","tree","getCheckedNodes","forEach","item","push","id","toString","parent_id","concat","split","handleSelectionChange","val","handleSizeChange","handleCurrentChange","addRole","diaplay_name","handleEdit","index","row","handleRole","showRightsDialog","_this5","_callee5","_context5","then","handleDelete","_this6","$confirm","confirmButtonText","cancelButtonText","_callee6","_context6","delete","catch","mounted","pages_User_roleMan","render","_vm","_h","$createElement","_c","_self","attrs","_v","on","click","staticClass","ref","staticStyle","width","border","tooltip-effect","selection-change","align","prop","scopedSlots","_u","key","fn","scope","_s","_f","create_time","update_time","size","$event","$index","current-page","page-sizes","page-size","layout","size-change","current-change","title","visible","update:visible","model","label-width","autocomplete","value","callback","$$v","$set","expression","slot","default-expand-all","show-checkbox","node-key","default-checked-keys","props","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/101.96fde6bc22c9abf1f533.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport InputArea from \"../../plugin/components/InputArea\";\r\nexport default {\r\n  name: \"userList\",\r\n  components: {\r\n    InputArea\r\n  },\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      pagesize: 5,\r\n      total: 0,\r\n      dialogAddRole: false,\r\n      dialogTitle: \"\",\r\n      formLabelWidth: \"120px\",\r\n      roleId: -1, //权限分配id\r\n      form: {\r\n        role_id: -1,\r\n        name: \"\",\r\n        display_name: \"\"\r\n      },\r\n      form2: {\r\n        role: \"\"\r\n      },\r\n      dialogRoleAssign: false,\r\n      dialogRightAssign: false,\r\n      tableData: [],\r\n      multipleSelection: [],\r\n      rightData: [],\r\n      defaultProps: {\r\n        children: \"children\",\r\n        label: \"display_name\"\r\n      },\r\n      checkedKeys: [],//默认选中的权限id\r\n      currentRole: {},//记录点击权限按钮时的角色信息\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    async getRoleList() {\r\n      const res = await this.$http.get(\"v1/backend/auth/roles\", {\r\n        params: {\r\n          page: this.currentPage,\r\n          limit: this.pagesize\r\n        }\r\n      });\r\n      console.log(res);\r\n      if (res.data.code === 200) {\r\n        this.tableData = res.data.data;\r\n        this.total = res.data.data.total;\r\n        this.$message({\r\n          type: \"success\",\r\n          message: res.data.msg\r\n        });\r\n      } else {\r\n        this.$message({\r\n          type: \"info\",\r\n          message: res.data.msg\r\n        });\r\n      }\r\n    },\r\n    async getRigthList() {\r\n      const res = await this.$http.get(\"v1/backend/auth/permissions\");\r\n      console.log(res);\r\n    },\r\n    async addRoleFn() {\r\n      if (!this.form.role_id) {\r\n        const res = await this.$http.post(\"v1/backend/auth/roles\", {\r\n          name: this.form.name,\r\n          display_name: this.form.display_name\r\n        });\r\n        if (res.data.code === 200) {\r\n          this.dialogAddRole = false;\r\n          this.getRoleList();\r\n          this.$message({\r\n            type: \"success\",\r\n            message: res.data.msg\r\n          });\r\n        } else {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: res.data.msg\r\n          });\r\n        }\r\n      } else {\r\n        console.log(this.form);\r\n        const res = await this.$http.put(\"v1/backend/auth/roles\", {\r\n          name: this.form.name,\r\n          display_name: this.form.display_name,\r\n          role_id: this.form.role_id\r\n        });\r\n        console.log(res)\r\n        if (res.data.code === 200) {\r\n          this.dialogAddRole = false;\r\n          this.getRoleList();\r\n          this.$message({\r\n            type: \"success\",\r\n            message: res.data.msg\r\n          });\r\n        } else {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: res.data.msg\r\n          });\r\n        }\r\n      }\r\n    },\r\n    async handleRights() {\r\n      // 获取所有选中的权限id\r\n      const nodes = this.$refs.tree.getCheckedNodes();\r\n      console.log(nodes)\r\n      let arr = [];\r\n      nodes.forEach((item) => {\r\n        // 选中的子权限id\r\n        arr.push(item.id.toString());\r\n\r\n        // 子权限的id 对应的父权限的id\r\n        if (typeof (item.parent_id) === 'number') {\r\n          arr.push(item.parent_id.toString());\r\n        } else {\r\n          arr = arr.concat(item.parent_id.split(','));\r\n        }\r\n        console.log(arr)\r\n      });\r\n\r\n      // 数组去重\r\n      // const set = new Set(arr);\r\n\r\n      // const ids = [...set].join(',');\r\n\r\n      // const res = await this.$http.post(`/roles/${this.currentRole.id}/rights`, {\r\n      //   rids: ids\r\n      // });\r\n      // if (res.data.meta.status === 200) {\r\n      //   this.editRightsDialog = false;\r\n      //   this.$message({\r\n      //     type: 'success',\r\n      //     message: '权限分配成功'\r\n      //   });\r\n      //   this.loadData();\r\n      // } else {\r\n      //   this.$message({\r\n      //     type: 'error',\r\n      //     message: '权限分配失败'\r\n      //   });\r\n      // }\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n      console.log(this.multipleSelection);\r\n    },\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n      this.pagesize = val;\r\n      this.getRoleList();\r\n    },\r\n    handleCurrentChange(val) {\r\n      console.log(`当前页: ${val}`);\r\n      this.currentPage = val;\r\n      this.getRoleList();\r\n    },\r\n    addRole() {\r\n      this.dialogAddRole = true;\r\n      this.dialogTitle = \"添加角色\";\r\n      this.form = {\r\n        name: \"\",\r\n        diaplay_name: \"\"\r\n      };\r\n    },\r\n    handleEdit(index, row) {\r\n      console.log(index, row);\r\n      this.dialogAddRole = true;\r\n      this.dialogTitle = \"编辑角色\";\r\n      this.form.name = row.name;\r\n      this.form.display_name = row.display_name;\r\n      this.form.role_id = row.id;\r\n    },\r\n    // async editRoleFn() {\r\n    //   console.log('woshi')\r\n    //   const res = await this.$http.put('auth/roles',{\r\n    //     username: this.form.name,\r\n    //     display_name: this.form.display_name\r\n    //   })\r\n    //   console.log(res)\r\n    // },\r\n    handleRole(index, row) {\r\n      this.dialogRoleAssign = true;\r\n    },\r\n    async showRightsDialog(row) {\r\n      console.log(row)\r\n      this.dialogRightAssign = true;\r\n      this.roleId = row.id;\r\n      //获取当前角色具有的权限\r\n      const result = await this.$http.get(\"v1/backend/auth/permissions\",{\r\n        params: {\r\n          role_id: row.id\r\n        }\r\n      }).then(res => {\r\n      })\r\n      // function getCurrentRoleRights(rightsList) {\r\n      //   const arr = []\r\n      //   const fn = function (list) {\r\n      //     list.forEach((item) => {\r\n      //       if(!item.children) {\r\n      //         arr.push(item.id)\r\n      //       }else {\r\n      //         fn(item.children)\r\n      //       }\r\n      //     })\r\n      //   }\r\n      //   fn(rightsList)\r\n      //   return arr\r\n      // }\r\n      // this.currentRole = role\r\n      const res = await this.$http.get(\"v1/backend/auth/permissions\");\r\n      console.log(res);\r\n      if (res.data.code === 200) {\r\n        this.rightData = res.data.data;\r\n      }\r\n      // this.checkedKeys = getCurrentRoleRights(role.children)\r\n    },\r\n    handleDelete(index, row) {\r\n      this.form.role_id = row.id;\r\n      console.log(this.form.role_id);\r\n      this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(async () => {\r\n          const res = await this.$http.delete(\"v1/backend/auth/roles\", {\r\n            params: {\r\n              role_id: this.form.role_id\r\n            }\r\n          });\r\n          if (res.data.code === 200) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"删除成功!\"\r\n            });\r\n            this.getRoleList();\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getRoleList();\r\n    this.getRigthList();\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/User/roleMan.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"userList—main\"}},[_c('input-area',[_c('el-button',{attrs:{\"type\":\"danger\"}},[_vm._v(\"删除\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRole}},[_vm._v(\"添加\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"bd\"},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"data\":_vm.tableData,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"display_name\",\"label\":\"显示名称\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"create_time\",\"label\":\"创建时间\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"dateFormat\")(scope.row.create_time*1000)))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"update_time\",\"label\":\"更新时间\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"dateFormat\")(scope.row.update_time*1000)))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"action\",\"label\":\"操作\",\"align\":\"center\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.showRightsDialog(scope.row)}}},[_vm._v(\"权限\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":[5, 10, 15, 20],\"page-size\":_vm.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.dialogAddRole,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogAddRole=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.display_name),callback:function ($$v) {_vm.$set(_vm.form, \"display_name\", $$v)},expression:\"form.display_name\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogAddRole = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRoleFn}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"权限分配\",\"visible\":_vm.dialogRightAssign,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogRightAssign=$event}}},[_c('div',[_c('el-tree',{ref:\"tree\",attrs:{\"default-expand-all\":\"\",\"data\":_vm.rightData,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-checked-keys\":_vm.checkedKeys,\"props\":_vm.defaultProps}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogRightAssign = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleRights}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-091254af\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/User/roleMan.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-091254af\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/style-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./roleMan.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./roleMan.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./roleMan.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-091254af\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./roleMan.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-091254af\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/User/roleMan.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}